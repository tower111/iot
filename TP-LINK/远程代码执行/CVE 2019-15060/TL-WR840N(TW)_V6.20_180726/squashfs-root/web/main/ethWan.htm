<script language="javascript" type="text/javascript">function getPPPoEConnStatus(){var pppoelist=$.act(ACT_GET,WAN_PPP_CONN,PPPoEStk,null,null);if(INCLUDE_DUAL_ACCESS){var iplist_dyn=$.act(ACT_GET,WAN_IP_CONN,dynStk,null,null)}if(!$.exe()&&(pppoelist.enable==1)){if(pppoelist.connectionStatus=="Connecting"){$.removeClass($.id("PPPoEConnecting"),"nd")}else{$.addClass($.id("PPPoEConnecting"),"nd")}if(INCLUDE_IPV6&&pppoelist.X_TP_IPv4Enabled==0){$.id("conn").disabled=1;$.id("disConn").disabled=1}else{if(pppoelist.connectionStatus=="Connected"){$.id("conn").disabled=1;$.id("disConn").disabled=0}else{if((pppoelist.connectionStatus=="Disconnected")||(pppoelist.connectionStatus=="Unconfigured")){$.id("conn").disabled=0;$.id("disConn").disabled=1;if(pppoelist.lastConnectionError=="ERROR_AUTHENTICATION_FAILURE"){$.removeClass($.id("authFail"),"nd")}}else{$.id("conn").disabled=1;$.id("disConn").disabled=0;if(pppoelist.lastConnectionError=="ERROR_AUTHENTICATION_FAILURE"){$.removeClass($.id("authFail"),"nd")}}}}if(INCLUDE_DUAL_ACCESS&&pppoelist.secondConnection=="sec_conn_dynip"){$.h($.id("secondDynIpAddress"),iplist_dyn.externalIPAddress);$.h($.id("secondDynIpMask"),iplist_dyn.subnetMask);if(iplist_dyn.enable==1){if(iplist_dyn.connectionStatus=="Connected"){$.addClass($.id("secondDynIpConnecting"),"nd");$.id("secondDynIpRenew").disabled=1;$.id("secondDynIpRelease").disabled=0}else{if(iplist_dyn.connectionStatus=="Disconnected"){$.addClass($.id("secondDynIpConnecting"),"nd");$.id("secondDynIpRenew").disabled=0;$.id("secondDynIpRelease").disabled=1}else{$.removeClass($.id("secondDynIpConnecting"),"nd");$.id("secondDynIpRenew").disabled=1;$.id("secondDynIpRelease").disabled=1}}}}}}function getDynamicIPConnStatus(){var iplist_dyn=$.act(ACT_GET,WAN_IP_CONN,dynStk,null,null);if(!$.exe()&&(iplist_dyn.enable==1)){$.h($.id("dyn_ip"),iplist_dyn.externalIPAddress);$.h($.id("dyn_mask"),iplist_dyn.subnetMask);$.h($.id("dyn_gw"),iplist_dyn.defaultGateway);if(iplist_dyn.connectionStatus=="Connected"){$.addClass($.id("DynIpConnecting"),"nd");$.removeLoading();$.id("renew").disabled=1;$.id("release").disabled=0}else{if(iplist_dyn.connectionStatus=="Disconnected"){$.addClass($.id("DynIpConnecting"),"nd");$.removeLoading();$.id("renew").disabled=0;$.id("release").disabled=1}else{$.removeClass($.id("DynIpConnecting"),"nd");$.id("renew").disabled=1;$.id("release").disabled=1}}}}function getDynamicL2tpConnStatus(){var l2tplist=$.act(ACT_GET,WAN_L2TP_CONN,l2tpStk,null,null);if(!$.exe()){$.h($.id("isp_ip_dyn"),l2tplist.externalIPAddressIP?l2tplist.externalIPAddressIP:"0.0.0.0");$.h($.id("isp_net_mask_dyn"),l2tplist.subnetMaskIP?l2tplist.subnetMaskIP:"0.0.0.0");$.h($.id("isp_gw_dyn"),l2tplist.defaultGatewayIP?l2tplist.defaultGatewayIP:"0.0.0.0");$.h($.id("isp_dns_1_dyn"),l2tplist.DNSServersIP.split(",")[0]?l2tplist.DNSServersIP.split(",")[0]:"0.0.0.0");$.h($.id("isp_dns_2_dyn"),l2tplist.DNSServersIP.split(",")[1]?l2tplist.DNSServersIP.split(",")[1]:"0.0.0.0");$.h($.id("internet_ip"),l2tplist.externalIPAddress);$.h($.id("internet_dns_1"),l2tplist.DNSServers.split(",")[0]?l2tplist.DNSServers.split(",")[0]:"0.0.0.0");$.h($.id("internet_dns_2"),l2tplist.DNSServers.split(",")[1]?l2tplist.DNSServers.split(",")[1]:"0.0.0.0");if(l2tplist.enable==1){if(l2tplist.connectionStatus=="Connected"){$.id("conn2").disabled=1;$.id("disConn2").disabled=0}else{if((l2tplist.connectionStatusIP=="Disconnected")||(l2tplist.connectionStatusIP=="Unconfigured")||((l2tplist.addressingType=="Static")&&(l2tplist.connectionStatusIP=="Connected")&&((l2tplist.connectionStatus=="Unconfigured")||(l2tplist.connectionStatus=="Disconnected")))){$.id("conn2").disabled=0;$.id("disConn2").disabled=1}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=0}}}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=1}}}function getStaticL2tpConnStatus(){var l2tplist=$.act(ACT_GET,WAN_L2TP_CONN,l2tpStk,null,null);if(!$.exe()){$.h($.id("internet_ip"),l2tplist.externalIPAddress);$.h($.id("internet_dns_1"),l2tplist.DNSServers.split(",")[0]?l2tplist.DNSServers.split(",")[0]:"0.0.0.0");$.h($.id("internet_dns_2"),l2tplist.DNSServers.split(",")[1]?l2tplist.DNSServers.split(",")[1]:"0.0.0.0");if(l2tplist.enable==1){if(l2tplist.connectionStatus=="Connected"){$.id("conn2").disabled=1;$.id("disConn2").disabled=0}else{if((l2tplist.connectionStatusIP=="Disconnected")||(l2tplist.connectionStatusIP=="Unconfigured")||((l2tplist.addressingType=="Static")&&(l2tplist.connectionStatusIP=="Connected")&&((l2tplist.connectionStatus=="Unconfigured")||(l2tplist.connectionStatus=="Disconnected")))){$.id("conn2").disabled=0;$.id("disConn2").disabled=1}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=0}}}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=1}}}function getDynamicPptpConnStatus(){var pptplist=$.act(ACT_GET,WAN_PPTP_CONN,pptpStk,null,null);if(!$.exe()){$.h($.id("isp_ip_dyn"),pptplist.externalIPAddressIP?pptplist.externalIPAddressIP:"0.0.0.0");$.h($.id("isp_net_mask_dyn"),pptplist.subnetMaskIP?pptplist.subnetMaskIP:"0.0.0.0");$.h($.id("isp_gw_dyn"),pptplist.defaultGatewayIP?pptplist.defaultGatewayIP:"0.0.0.0");$.h($.id("isp_dns_1_dyn"),pptplist.DNSServersIP.split(",")[0]?pptplist.DNSServersIP.split(",")[0]:"0.0.0.0");$.h($.id("isp_dns_2_dyn"),pptplist.DNSServersIP.split(",")[1]?pptplist.DNSServersIP.split(",")[1]:"0.0.0.0");$.h($.id("internet_ip"),pptplist.externalIPAddress);$.h($.id("internet_dns_1"),pptplist.DNSServers.split(",")[0]?pptplist.DNSServers.split(",")[0]:"0.0.0.0");$.h($.id("internet_dns_2"),pptplist.DNSServers.split(",")[1]?pptplist.DNSServers.split(",")[1]:"0.0.0.0");if(pptplist.enable==1){if(pptplist.connectionStatus=="Connected"){$.id("conn2").disabled=1;$.id("disConn2").disabled=0}else{if((pptplist.connectionStatusIP=="Disconnected")||(pptplist.connectionStatusIP=="Unconfigured")||((pptplist.addressingType=="Static")&&(pptplist.connectionStatusIP=="Connected")&&((pptplist.connectionStatus=="Unconfigured")||(pptplist.connectionStatus=="Disconnected")))){$.id("conn2").disabled=0;$.id("disConn2").disabled=1}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=0}}}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=1}}}function getStaticPptpConnStatus(){var pptplist=$.act(ACT_GET,WAN_PPTP_CONN,pptpStk,null,null);if(!$.exe()){$.h($.id("internet_ip"),pptplist.externalIPAddress);$.h($.id("internet_dns_1"),pptplist.DNSServers.split(",")[0]?pptplist.DNSServers.split(",")[0]:"0.0.0.0");$.h($.id("internet_dns_2"),pptplist.DNSServers.split(",")[1]?pptplist.DNSServers.split(",")[1]:"0.0.0.0");if(pptplist.enable==1){if(pptplist.connectionStatus=="Connected"){$.id("conn2").disabled=1;$.id("disConn2").disabled=0}else{if((pptplist.connectionStatusIP=="Disconnected")||(pptplist.connectionStatusIP=="Unconfigured")||((pptplist.addressingType=="Static")&&(pptplist.connectionStatusIP=="Connected")&&((pptplist.connectionStatus=="Unconfigured")||(pptplist.connectionStatus=="Disconnected")))){$.id("conn2").disabled=0;$.id("disConn2").disabled=1}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=0}}}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=1}}}function isValidGLUIP6AddrStrict(ip6Addr){var flag;var regExp=/^(:|[a-f]|[A-F]|[0-9]){1,39}$/;if(regExp.test(ip6Addr)){flag=true}else{flag=false}regExp=/::/;if(flag){if(regExp.test(ip6Addr)){regExp=/^([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*$/;if(regExp.test(ip6Addr)){flag=false}else{var index=ip6Addr.indexOf("::");var len=ip6Addr.length;var substr1=ip6Addr.substr(0,index);var substr2=ip6Addr.substr(index+2,len-index-2);regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){0,6}([a-f]|[A-F]|[0-9]){1,4}$/;var num=0;if(""==substr1&&""==substr2){flag=false}else{if(""==substr2){flag=false}else{if(""==substr1){if(!regExp.test(substr2)){flag=false}}else{if(!regExp.test(substr1)||!regExp.test(substr2)){flag=false}else{if(regExp.test(substr1)&&regExp.test(substr2)){for(var i=0;i<substr1.length;i++){if(substr1.charAt(i)==":"){num+=1}}for(var i=0;i<substr2.length;i++){if(substr1.charAt(i)==":"){num+=1}}if(num>5){flag=false}}}}}}}}else{regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){7}([a-f]|[A-F]|[0-9]){1,4}$/;if(!regExp.test(ip6Addr)){flag=false}}}if(flag){var index;index=ip6Addr.indexOf(":");var substr=ip6Addr.substr(0,index);if(0==index||parseInt(substr,16)==0){regExp=/^((0{0,4})|::|:)*$/;if(regExp.test(ip6Addr)){flag=false}regExp=/^(((0){0,4})|::|:)*((0){0,3}(1))$/;if(regExp.test(ip6Addr)){flag=false}}else{if(parseInt(substr,16)>=65280){flag=false}else{if(parseInt(substr,16)>=65152&&parseInt(substr,16)<=65215){flag=true}else{if(parseInt(substr,16)>=8192&&parseInt(substr,16)<=16383){flag=true}}}}}return flag}function showLnkType(){if($.id("link_type").value=="staticIp"){$.loadHelpFrame("WanStaticIpCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("static:1")}else{if($.id("ethWan_en").checked==0){$.reload("static:0")}}}return}if($.id("link_type").value=="dynamicIp"){$.loadHelpFrame("WanDynamicIpCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("dynamic:1")}else{if($.id("ethWan_en").checked==0){$.reload("dynamic:0")}}}return}if($.id("link_type").value=="pppoe"){$.loadHelpFrame("PPPoECfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("pppoe:1")}else{if($.id("ethWan_en").checked==0){$.reload("pppoe:0")}}}return}if($.id("link_type").value=="l2tp"){$.loadHelpFrame("L2tpCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("l2tp:1")}else{if($.id("ethWan_en").checked==0){$.reload("l2tp:0")}}}return}if($.id("link_type").value=="pptp"){$.loadHelpFrame("PptpCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("pptp:1")}else{if($.id("ethWan_en").checked==0){$.reload("pptp:0")}}}return}if($.id("link_type").value=="bpa"){$.loadHelpFrame("BpaCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("bpa:1")}else{if($.id("ethWan_en").checked==0){$.reload("bpa:0")}}}return}}function natClick(val){if(val=="static"){if($.id("enable_nat").checked==1){$.id("enable_fullnat").disabled=0}else{if($.id("enable_nat").checked==0){$.id("enable_fullnat").checked=0;$.id("enable_fullnat").disabled=1}}}else{if(val=="dynamic"){if($.id("dyn_enable_nat").checked==1){$.id("dyn_enable_fullnat").disabled=0}else{if($.id("dyn_enable_nat").checked==0){$.id("dyn_enable_fullnat").checked=0;$.id("dyn_enable_fullnat").disabled=1}}}}}function IPClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("ip_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("ip_elem_adv"),"nd");$.addClass(obj,"cln")}}function DynIPClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("dyn_ip_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("dyn_ip_elem_adv"),"nd");$.addClass(obj,"cln")}}function PPPoEClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("pppoe_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("pppoe_elem_adv"),"nd");$.addClass(obj,"cln")}}function doManualDns(){if($.id("dynamic_manual_dns").checked==1){$.removeClass($.id("dyn_ip_dns_tbl"),"nd")}else{$.addClass($.id("dyn_ip_dns_tbl"),"nd")}}function doManualDns6(){if($.id("dynamic_manual_dns6").checked==1){$.removeClass($.id("dyn_ip_dns6_tbl"),"nd")}else{$.addClass($.id("dyn_ip_dns6_tbl"),"nd")}}function PPPoEShowDiv(val){switch(val){case 2:if($.id("externIp_en").checked==1){$.removeClass($.id("exIp_tbl"),"nd")}else{$.addClass($.id("exIp_tbl"),"nd")}break;case 3:if($.id("dns_en").checked==1){$.removeClass($.id("dns_tbl"),"nd")}else{$.addClass($.id("dns_tbl"),"nd")}break;default:}}function ShowDiv(val){if(val==null){return}var objId=val.id;var pattern1=/_enable/i;var pattern2=/ppp_/i;if(objId.search(pattern1)!=-1){var obj=$.id(objId.replace(pattern1,"_basic"));if(obj!=null){if(val.checked==true){$.removeClass(obj,"nd")}else{$.addClass(obj,"nd")}}obj=$.id(objId.replace(pattern1,"_adv"));if(obj!=null){if(val.checked==true){$.removeClass(obj,"nd")}else{$.addClass(obj,"nd")}}if(objId.search(pattern2)!=-1){if($.id("ppp_ip4_elem_enable").checked==false&&$.id("ppp_ip6_elem_enable").checked==true){$.id("connAlwaysOn").checked=true;$.id("connOnDemand").disabled=true;$.id("connManual").disabled=true}else{$.id("connOnDemand").disabled=false;$.id("connManual").disabled=false}}}else{if(objId=="externIp6_en"){if(val.checked==true){$.removeClass($.id("exIp6_tbl"),"nd");if(INCLUDE_IPV6_SLAAC){$.id("ppp_ip6addr_type").disabled=1}}else{$.addClass($.id("exIp6_tbl"),"nd");if(INCLUDE_IPV6_SLAAC){$.id("ppp_ip6addr_type").disabled=0}}}else{if(objId=="dns6_en"){if(val.checked==true){$.removeClass($.id("dns6_tbl"),"nd")}else{$.addClass($.id("dns6_tbl"),"nd")}}}}}function isSameSubnet(wanip,wanmask,lanip,lanmask){wanip=$.ip2num(wanip);wanmask=$.ip2num(wanmask);lanip=$.ip2num(lanip);lanmask=$.ip2num(lanmask);if((lanip&lanmask)==(wanip&lanmask)||((lanip&wanmask)==(wanip&wanmask))){return true}return false}function charCompareA(szname,en_limit,cn_limit){var c;var ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.";if(szname.length>en_limit){return false}for(var i=0;i<szname.length;i++){c=szname.charAt(i);if(ch.indexOf(c)==-1){if(szname.length>cn_limit){return false}}}return true}function initStaticIP(){$.removeClass($.id("ip_elem_basic"),"nd");$.removeClass($.id("ipoeClick"),"nd");$.removeClass($.id("ipoeClick"),"cln");$.addClass($.id("ip_elem_adv"),"nd");$.loadHelpFrame("WanStaticIpCfgHelpRpm.htm");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");oldStaIp=wan_iplist_sta.externalIPAddress;if(wan_iplist_sta.externalIPAddress.substring(0,4)!="169."){$.id("ip_address").value=wan_iplist_sta.externalIPAddress;$.id("netmask").value=wan_iplist_sta.subnetMask}else{$.id("ip_address").value="0.0.0.0";$.id("netmask").value="0.0.0.0"}$.id("ip_gateway").value=wan_iplist_sta.defaultGateway?wan_iplist_sta.defaultGateway:"0.0.0.0";$.id("mtu").value=wan_iplist_sta.maxMTUSize;if(wan_iplist_sta.NATEnabled==1){$.id("enable_nat").checked=1;$.id("enable_fullnat").checked=(wan_iplist_sta.X_TP_FullconeNATEnabled==1)?1:0}else{if(wan_iplist_sta.NATEnabled==0){$.id("enable_nat").checked=0;$.id("enable_fullnat").disabled=1;$.id("enable_fullnat").checked=0}}$.id("enable_spi").checked=(wan_iplist_sta.X_TP_FirewallEnabled==1)?1:0;if(!INCLUDE_UN_IPTV){$.id("ip_igmp_en").checked=(wan_iplist_sta.X_TP_IGMPProxyEnabled==1)?1:0;initIGMPForceVersion("ip",wan_iplist_sta.X_TP_IGMPForceVersion)}if(wan_iplist_sta.DNSOverrideAllowed==1){$.id("dns_address").value=(wan_iplist_sta.DNSServers).split(",")[0]?(wan_iplist_sta.DNSServers).split(",")[0]:"0.0.0.0";$.id("second_dns").value=(wan_iplist_sta.DNSServers).split(",")[1]?(wan_iplist_sta.DNSServers).split(",")[1]:"0.0.0.0"}if(INCLUDE_IPV6){$.id("stc_ip4_elem_enable").checked=(wan_iplist_sta.X_TP_IPv4Enabled==1)?1:0;ShowDiv($.id("stc_ip4_elem_enable"));$.id("stc_ip6_elem_enable").checked=(wan_iplist_sta.X_TP_IPv6Enabled==1)?1:0;ShowDiv($.id("stc_ip6_elem_enable"));if(INCLUDE_IPV6_MLD){$.removeClass($.id("ip_mld"),"nd");$.id("ip_mld_en").checked=(wan_iplist_sta.X_TP_MLDProxyEnabled==1)?1:0}else{$.addClass($.id("ip_mld"),"nd")}$.id("stc_ip6_addr").value=wan_iplist_sta.X_TP_ExternalIPv6Address;$.id("stc_prefix_len").value="64";$.id("stc_ip6_gateway").value=wan_iplist_sta.X_TP_DefaultIPv6Gateway;$.id("dns6_address").value=(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[0]?(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("second_dns6").value=(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[1]?(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[1]:"::"}}function initDynamicIP(){$.removeClass($.id("dyn_ip_elem_basic"),"nd");$.removeClass($.id("dynipClick"),"nd");$.removeClass($.id("dynipClick"),"cln");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.loadHelpFrame("WanDynamicIpCfgHelpRpm.htm");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.id("dyn_mtu").value=wan_iplist_dyn.maxMTUSize;if(wan_iplist_dyn.NATEnabled==1){$.id("dyn_enable_nat").checked=1;$.id("dyn_enable_fullnat").checked=(wan_iplist_dyn.X_TP_FullconeNATEnabled==1)?1:0}else{if(wan_iplist_dyn.NATEnabled==0){$.id("dyn_enable_nat").checked=0;$.id("dyn_enable_fullnat").disabled=1;$.id("dyn_enable_fullnat").checked=0}}if(wan_iplist_dyn.DNSOverrideAllowed==1){$.id("dyn_dns1").value=(wan_iplist_dyn.DNSServers).split(",")[0]?(wan_iplist_dyn.DNSServers).split(",")[0]:"0.0.0.0";$.id("dyn_dns2").value=(wan_iplist_dyn.DNSServers).split(",")[1]?(wan_iplist_dyn.DNSServers).split(",")[1]:"0.0.0.0"}$.id("dynamic_manual_dns").checked=wan_iplist_dyn.DNSOverrideAllowed==1?1:0;$.id("hostname").value=wan_iplist_dyn.X_TP_Hostname;$.id("unicast").checked=wan_iplist_dyn.X_TP_Unicast==1?1:0;if(!INCLUDE_UN_IPTV){$.id("dyn_ip_igmp_en").checked=(wan_iplist_dyn.X_TP_IGMPProxyEnabled==1)?1:0;initIGMPForceVersion("dyn_ip",wan_iplist_dyn.X_TP_IGMPForceVersion)}$.id("dyn_ip_spi_en").checked=(wan_iplist_dyn.X_TP_FirewallEnabled==1)?1:0;doManualDns();$.auto(function(){getDynamicIPConnStatus()},5000,true);if(INCLUDE_IPV6){$.id("dyn_ip4_elem_enable").checked=(wan_iplist_dyn.X_TP_IPv4Enabled==1);ShowDiv($.id("dyn_ip4_elem_enable"));$.id("dyn_ip6_elem_enable").checked=(wan_iplist_dyn.X_TP_IPv6Enabled==1)?1:0;ShowDiv($.id("dyn_ip6_elem_enable"));if(INCLUDE_IPV6_MLD){$.removeClass($.id("dyn_ip_mld"),"nd");$.id("dyn_ip_mld_en").checked=(wan_iplist_dyn.X_TP_MLDProxyEnabled==1)?1:0}else{$.addClass($.id("dyn_ip_mld"),"nd")}$.h($.id("dyn_ip6_addr"),wan_iplist_dyn.X_TP_ExternalIPv6Address);$.h($.id("dyn_prefix_len"),wan_iplist_dyn.X_TP_PrefixLength);$.h($.id("dyn_ip6_gw"),wan_iplist_dyn.X_TP_DefaultIPv6Gateway);$.id("dynamic_manual_dns6").checked=(wan_iplist_dyn.X_TP_IPv6DNSOverrideAllowed==1)?1:0;doManualDns6();if(wan_iplist_dyn.X_TP_IPv6DNSOverrideAllowed==1){$.id("dyn_dns6_1").value=(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[0]?(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("dyn_dns6_2").value=(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[1]?(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[1]:"::"}if(INCLUDE_IPV6_SLAAC){$.id("dyn_ip6addr_type").selectedIndex=(wan_iplist_dyn.X_TP_IPv6AddressingType=="DHCPv6")?0:1}}}function initSecConnStaIp(){$.id("secConnType_sta").checked=true;$.removeClass($.id("secondStaIp"),"nd");$.id("secondStaIpAddress").value=wan_iplist_sta.externalIPAddress;$.id("secondStaIpMask").value=wan_iplist_sta.subnetMask}function initSecConnDynIp(){$.id("secConnType_dyn").checked=true;$.removeClass($.id("secondDynIp"),"nd");$.h($.id("secondDynIpAddress"),wan_iplist_dyn.externalIPAddress);$.h($.id("secondDynIpMask"),wan_iplist_dyn.subnetMask);if(wan_iplist_dyn.enable==1){if(wan_iplist_dyn.connectionStatus=="Connected"){$.removeLoading();$.id("secondDynIpRenew").disabled=1;$.id("secondDynIpRelease").disabled=0}else{if(wan_iplist_dyn.connectionStatus=="Disconnected"){$.removeLoading();$.id("secondDynIpRenew").disabled=0;$.id("secondDynIpRelease").disabled=1}else{$.removeClass($.id("secondDynIpConnecting"),"nd");$.id("secondDynIpRenew").disabled=1;$.id("secondDynIpRelease").disabled=1}}}}function initSecondaryConn(){if(wan_pppoelist.secondConnection=="sec_conn_dynip"){initSecConnDynIp();showSecondConnect("dynamic")}else{if(wan_pppoelist.secondConnection=="sec_conn_staip"){if(wan_iplist_sta.externalIPAddress.substring(0,4)!="169."){initSecConnStaIp();showSecondConnect("static")}}else{$.id("secConnType_disable").checked=true;showSecondConnect()}}}function initPPPoE(){$.removeClass($.id("pppoe_elem_basic"),"nd");$.removeClass($.id("pppoeClick"),"nd");$.removeClass($.id("pppoeClick"),"cln");$.addClass($.id("pppoe_elem_adv"),"nd");$.loadHelpFrame("PPPoECfgHelpRpm.htm");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.id("username").value=wan_pppoelist.username;$.id("pwd").value=wan_pppoelist.password;$.id("pwd2").value=wan_pppoelist.password;if(wan_pppoelist.lastConnectionError=="ERROR_AUTHENTICATION_FAILURE"){$.removeClass($.id("authFail"),"nd")}if(INCLUDE_SPECIAL_DIAL_MODE){$.id("speDail").value=wan_pppoelist.X_TP_SpecialDail}$.id("idleTime").value=wan_pppoelist.idleDisconnectTime;if(wan_pppoelist.connectionTrigger=="OnDemand"){$.id("connOnDemand").checked=1}else{if(wan_pppoelist.connectionTrigger=="AlwaysOn"){$.id("connAlwaysOn").checked=1}else{if(wan_pppoelist.connectionTrigger=="Manual"){$.id("connManual").checked=1}}}if(wan_pppoelist.PPPAuthenticationProtocol=="AUTO_AUTH"){$.id("ppp_authpro").value="AUTO_AUTH"}else{if(wan_pppoelist.PPPAuthenticationProtocol=="PAP"){$.id("ppp_authpro").value="PAP"}else{if(wan_pppoelist.PPPAuthenticationProtocol=="CHAP"){$.id("ppp_authpro").value="CHAP"}else{if(wan_pppoelist.PPPAuthenticationProtocol=="MS-CHAP"){$.id("ppp_authpro").value="MS-CHAP"}}}}$.id("acName").value=wan_pppoelist.PPPoEACName;$.id("serviceName").value=wan_pppoelist.PPPoEServiceName;$.id("pppmtu").value=wan_pppoelist.maxMRUSize;if(wan_pppoelist.NATEnabled==1){$.id("ppp_fullnat_en").checked=(wan_pppoelist.X_TP_FullconeNATEnabled==1)?1:0}else{if(wan_pppoelist.NATEnabled==0){$.id("ppp_fullnat_en").disabled=1;$.id("ppp_fullnat_en").checked=0}}$.id("ppp_spi_en").checked=(wan_pppoelist.X_TP_FirewallEnabled==1)?1:0;if(!INCLUDE_UN_IPTV){$.id("ppp_igmp_en").checked=(wan_pppoelist.X_TP_IGMPProxyEnabled==1)?1:0;initIGMPForceVersion("ppp",wan_pppoelist.X_TP_IGMPForceVersion)}if(wan_pppoelist.X_TP_UseStaticIP==1){$.id("externIp_en").checked=1;$.removeClass($.id("exIp_tbl"),"nd");$.id("externIpAddr").value=wan_pppoelist.externalIPAddress}else{$.id("externIp_en").checked=0;$.addClass($.id("exIp_tbl"),"nd")}$.id("ppp_echotime").value=wan_pppoelist.PPPLCPEcho?wan_pppoelist.PPPLCPEcho:0;if(wan_pppoelist.DNSOverrideAllowed==1){$.id("dns_en").checked=1;$.removeClass($.id("dns_tbl"),"nd");$.id("dns1").value=(wan_pppoelist.DNSServers.split(",")[0])?wan_pppoelist.DNSServers.split(",")[0]:"0.0.0.0";$.id("dns2").value=(wan_pppoelist.DNSServers.split(",")[1])?wan_pppoelist.DNSServers.split(",")[1]:"0.0.0.0"}else{$.id("dns_en").checked=0;$.addClass($.id("dns_tbl"),"nd")}if(INCLUDE_DUAL_ACCESS){initSecondaryConn()}if(wan_pppoelist.enable==1){$.auto(function(){getPPPoEConnStatus()},5000,true)}if(INCLUDE_IPV6){$.id("ppp_ip4_elem_enable").checked=(wan_pppoelist.X_TP_IPv4Enabled==1)?1:0;ShowDiv($.id("ppp_ip4_elem_enable"));$.id("ppp_ip6_elem_enable").checked=(wan_pppoelist.X_TP_IPv6Enabled==1)?1:0;ShowDiv($.id("ppp_ip6_elem_enable"));$.id("externIp6_en").checked=(wan_pppoelist.X_TP_IPv6AddressingType=="Static")?1:0;ShowDiv($.id("externIp6_en"));if($.id("ppp_ip4_elem_enable").checked==0&&$.id("ppp_ip6_elem_enable").checked==1){$.id("connAlwaysOn").checked=true;$.id("connOnDemand").disabled=true;$.id("connManual").disabled=true}if(INCLUDE_IPV6_MLD){$.removeClass($.id("ppp_mld"),"nd");$.id("ppp_mld_en").checked=(wan_pppoelist.X_TP_MLDProxyEnabled==1)?1:0}else{$.addClass($.id("ppp_mld"),"nd")}if(INCLUDE_IPV6_SLAAC){if(wan_pppoelist.X_TP_IPv6AddressingType=="Static"){$.id("ppp_ip6addr_type").disabled=1}else{$.id("ppp_ip6addr_type").disabled=0;if(wan_pppoelist.X_TP_IPv6AddressingType=="SLAAC"){$.id("ppp_ip6addr_type").selectedIndex=1}}}$.id("externIp6Addr").value=wan_pppoelist.X_TP_ExternalIPv6Address?wan_pppoelist.X_TP_ExternalIPv6Address:"::";$.id("externIp6Gateway").value=wan_pppoelist.X_TP_DefaultIPv6Gateway?wan_pppoelist.X_TP_DefaultIPv6Gateway:"::";$.id("dns6_en").checked=(wan_pppoelist.X_TP_IPv6DNSOverrideAllowed==1)?1:0;ShowDiv($.id("dns6_en"));if(wan_pppoelist.X_TP_IPv6DNSOverrideAllowed==1){$.id("dns6_1").value=(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[0]?(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("dns6_2").value=(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[1]?(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[1]:"::"}$.addClass($.id("ppp_ip6_elem_basic"),"nd");$.addClass($.id("ppp_ip6_elem_adv"),"nd")}}function initL2TP(){$.loadHelpFrame("L2tpCfgHelpRpm.htm");$.removeClass($.id("l2tp_pptp_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.removeClass($.id("defgw_elem"),"nd");$.removeClass($.id("l2tp_mtu_msg"),"nd");$.addClass($.id("pptp_mtu_msg"),"nd");$.removeClass($.id("l2tp_igmp_msg"),"nd");$.addClass($.id("pptp_igmp_msg"),"nd");$.id("ppp_username").value=wan_l2tp_list.username;$.id("ppp_pwd").value=wan_l2tp_list.password;$.id("srvAddrName").value=wan_l2tp_list.serverIpOrName;if(wan_l2tp_list.addressingType=="DHCP"){$.id("ipType_dyn").checked=1;$.removeClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.auto(function(){getDynamicL2tpConnStatus()},5000,true)}else{if(wan_l2tp_list.addressingType=="Static"){$.id("ipType_stc").checked=1;$.removeClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.id("isp_ip_stc").value=wan_l2tp_list.externalIPAddressIP;$.id("isp_net_mask_stc").value=wan_l2tp_list.subnetMaskIP;$.id("isp_gw_stc").value=wan_l2tp_list.defaultGatewayIP?wan_l2tp_list.defaultGatewayIP:"0.0.0.0";$.id("isp_dns_1_stc").value=wan_l2tp_list.DNSServersIP.split(",")[0]?wan_l2tp_list.DNSServersIP.split(",")[0]:"0.0.0.0";$.id("isp_dns_2_stc").value=wan_l2tp_list.DNSServersIP.split(",")[1]?wan_l2tp_list.DNSServersIP.split(",")[1]:"0.0.0.0";$.auto(function(){getStaticL2tpConnStatus()},5000,true)}}$.id("l2tp_mtu").value=wan_l2tp_list.maxMRUSize;if(!INCLUDE_UN_IPTV){$.id("l2tp_igmp_en").checked=(wan_l2tp_list.IGMPProxyEnabled==1)?1:0;initIGMPForceVersion("l2tp",wan_l2tp_list.IGMPForceVersion)}if(wan_l2tp_list.connectionTrigger=="OnDemand"){$.id("da_connOnDemand").checked=1}else{if(wan_l2tp_list.connectionTrigger=="AlwaysOn"){$.id("da_connAlwaysOn").checked=1}else{if(wan_l2tp_list.connectionTrigger=="Manual"){$.id("da_connManual").checked=1}}}$.id("da_idleTime").value=wan_l2tp_list.idleDisconnectTime}function initPPTP(){$.loadHelpFrame("PptpCfgHelpRpm.htm");$.removeClass($.id("l2tp_pptp_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.removeClass($.id("defgw_elem"),"nd");$.removeClass($.id("pptp_mtu_msg"),"nd");$.addClass($.id("l2tp_mtu_msg"),"nd");$.removeClass($.id("pptp_igmp_msg"),"nd");$.addClass($.id("l2tp_igmp_msg"),"nd");$.id("ppp_username").value=wan_pptp_list.username;$.id("ppp_pwd").value=wan_pptp_list.password;$.id("srvAddrName").value=wan_pptp_list.serverIpOrName;if(wan_pptp_list.addressingType=="DHCP"){$.id("ipType_dyn").checked=1;$.removeClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.auto(function(){getDynamicPptpConnStatus()},5000,true)}else{if(wan_pptp_list.addressingType=="Static"){$.id("ipType_stc").checked=1;$.removeClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.id("isp_ip_stc").value=wan_pptp_list.externalIPAddressIP;$.id("isp_net_mask_stc").value=wan_pptp_list.subnetMaskIP;$.id("isp_gw_stc").value=wan_pptp_list.defaultGatewayIP?wan_pptp_list.defaultGatewayIP:"0.0.0.0";$.id("isp_dns_1_stc").value=wan_pptp_list.DNSServersIP.split(",")[0]?wan_pptp_list.DNSServersIP.split(",")[0]:"0.0.0.0";$.id("isp_dns_2_stc").value=wan_pptp_list.DNSServersIP.split(",")[1]?wan_pptp_list.DNSServersIP.split(",")[1]:"0.0.0.0";$.auto(function(){getStaticPptpConnStatus()},5000,true)}}$.id("pptp_mtu").value=wan_pptp_list.maxMRUSize;if(!INCLUDE_UN_IPTV){$.id("pptp_igmp_en").checked=(wan_pptp_list.IGMPProxyEnabled==1)?1:0;initIGMPForceVersion("pptp",wan_pptp_list.IGMPForceVersion)}if(wan_pptp_list.connectionTrigger=="OnDemand"){$.id("da_connOnDemand").checked=1}else{if(wan_pptp_list.connectionTrigger=="AlwaysOn"){$.id("da_connAlwaysOn").checked=1}else{if(wan_pptp_list.connectionTrigger=="Manual"){$.id("da_connManual").checked=1}}}$.id("da_idleTime").value=wan_pptp_list.idleDisconnectTime}function initBPA(){$.removeClass($.id("bpa_elem_basic"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoeClick"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.loadHelpFrame("BpaCfgHelpRpm.htm");$.id("bpa_username").value=wan_bpa_list.X_TP_BpaUsername;$.id("bpa_pwd").value=wan_bpa_list.X_TP_BpaPassword;$.id("bpa_authserver").value=wan_bpa_list.X_TP_BpaAuthServer;$.id("bpa_authdomain").value=wan_bpa_list.X_TP_BpaAuthDomain;$.id("bpa_mtu").value=wan_bpa_list.maxMTUSize;if(!INCLUDE_UN_IPTV){$.id("bpa_igmp_en").checked=wan_bpa_list.X_TP_IGMPProxyEnabled==1?true:false;initIGMPForceVersion("bpa",wan_bpa_list.X_TP_IGMPForceVersion)}if(wan_bpa_list.X_TP_BpaConnectionTrigger=="OnDemand"){$.id("bpa_connOnDemand").checked=1}else{if(wan_bpa_list.X_TP_BpaConnectionTrigger=="AlwaysOn"){$.id("bpa_connAlwaysOn").checked=1}else{if(wan_bpa_list.X_TP_BpaConnectionTrigger=="Manual"){$.id("bpa_connManual").checked=1}}}$.id("bpa_idleTime").value=wan_bpa_list.X_TP_BpaIdleDisconnectTime;if(bpaEnable==1){if(wan_bpa_list.X_TP_BpaConnectionStatus=="Connected"){$.id("bpa_conn").disabled=1;$.id("bpa_disConn").disabled=0}else{if((wan_bpa_list.connectionStatus=="Disconnected")||(wan_bpa_list.connectionStatus=="Unconfigured")){$.id("bpa_conn").disabled=0;$.id("bpa_disConn").disabled=1}else{$.id("bpa_conn").disabled=1;$.id("bpa_disConn").disabled=0}}}else{$.id("bpa_conn").disabled=1;$.id("bpa_disConn").disabled=1}}function init(){if(INCLUDE_UN_IPTV){$.addClass($.id("dyn_ip_igmp"),"nd");$.addClass($.id("ip_igmp"),"nd");$.addClass($.id("ppp_igmp"),"nd");$.addClass($.id("l2tp_pptp_igmp"),"nd");$.addClass($.id("bpa_igmp"),"nd")}if(INCLUDE_WAN_MODE){$.addClass($.id("ethEnable"),"nd")}if(INCLUDE_IPV6){var allElements=document.getElementsByTagName("p");var index;for(index=0;index<allElements.length;index++){if(allElements[index]!=null&&$.hasClass(allElements[index],"IPv6")){$.removeClass(allElements[index],"nd")}}if(INCLUDE_IPV6_SLAAC){$.removeClass($.id("ipv6_cfg_dynamic_slaac"),"nd");$.removeClass($.id("ipv6_cfg_ppp_slaac"),"nd")}else{$.addClass($.id("ipv6_cfg_dynamic_slaac"),"nd");$.addClass($.id("ipv6_cfg_ppp_slaac"),"nd")}}else{$.id("dyn_ip4_elem_enable").checked=1;$.id("stc_ip4_elem_enable").checked=1;$.id("ppp_ip4_elem_enable").checked=1;$.id("dyn_ip6_elem_enable").checked=0;$.id("stc_ip6_elem_enable").checked=0;$.id("ppp_ip6_elem_enable").checked=0;ShowDiv($.id("dyn_ip4_elem_enable"));ShowDiv($.id("stc_ip4_elem_enable"));ShowDiv($.id("ppp_ip4_elem_enable"));ShowDiv($.id("dyn_ip6_elem_enable"));ShowDiv($.id("stc_ip6_elem_enable"));ShowDiv($.id("ppp_ip6_elem_enable"))}loadType=($.mainParam)?$.mainParam.split(":")[0]:"init";var type="";var multiMode=$.act(ACT_GET,MULTIMODE,null,null);if(!$.exe()){sysMode=multiMode.mode}if(INCLUDE_IPV6){var wanIPv4ListAll=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","addressingType","X_TP_IPv4Enabled","X_TP_BpaEnable"]);var wanPPPv4ListAll=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","transportType","X_TP_IPv4Enabled"]);var wanIPList={};var wanPPPList={};var wanIndex=0;if(!$.exe()){$.each(wanIPv4ListAll,function(){if(this.X_TP_IPv4Enabled==1){wanIPList[wanIndex]=this;wanIndex++}});wanIndex=0;$.each(wanPPPv4ListAll,function(){if(this.X_TP_IPv4Enabled==1){wanPPPList[wanIndex]=this;wanIndex++}})}}else{var wanIPList=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","addressingType","X_TP_BpaEnable"]);var wanPPPList=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","transportType"])}if(INCLUDE_DUAL_ACCESS){$.removeClass($.id("div_secConn"),"nd")}if(INCLUDE_L2TP){var sel=$.id("link_type");var option=$.c("option");option.value="l2tp";option.text="L2TP";try{sel.add(option,null)}catch(e){sel.add(option)}var wanL2tpList=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","addressingType","transportType"])}if(INCLUDE_PPTP){var sel=$.id("link_type");var option=$.c("option");option.value="pptp";option.text="PPTP";try{sel.add(option,null)}catch(e){sel.add(option)}var wanPptpList=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","addressingType","transportType"])}if(INCLUDE_BPA){var sel=$.id("link_type");var option=$.c("option");option.value="bpa";option.text=s_str.bpa_cable;try{sel.add(option,null)}catch(e){sel.add(option)}if(INCLUDE_KOREA_SPEC||INCLUDE_BR_SPEC){$.addClass(option,"nd")}}var wanTypes=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]);var lanIpIntfObj=$.act(ACT_GL,LAN_IP_INTF,null,null,["IPInterfaceIPAddress","IPInterfaceSubnetMask"]);if(!$.exe()){$.each(wanTypes,function(){if(this.WANAccessType=="Ethernet"){pStk=this.__stack}});$.each(lanIpIntfObj,function(){lanip=this.IPInterfaceIPAddress;lanmask=this.IPInterfaceSubnetMask});var ethWan=$.act(ACT_GET,WAN_ETH_INTF,pStk,null,["enable","X_TP_lastUsedIntf"]);$.each(wanIPList,function(){var tmpStk=$.stkPop(this.__stack,2);if(pStk==tmpStk){if(this.addressingType=="Static"){staticStk=this.__stack;staticEnable=this.enable;wan_iplist_sta=$.act(ACT_GET,WAN_IP_CONN,this.__stack,null,null)}if(this.addressingType=="DHCP"&&this.X_TP_BpaEnable==0){dynStk=this.__stack;dynEnable=this.enable;wan_iplist_dyn=$.act(ACT_GET,WAN_IP_CONN,this.__stack,null,null)}if(this.X_TP_BpaEnable==1){bpaStk=this.__stack;bpaEnable=this.enable;wan_bpa_list=$.act(ACT_GET,WAN_IP_CONN,this.__stack,null,null)}if((this.enable==1)&&(this.addressingType=="Static")){type="staticIp"}else{if((this.enable==1)&&(this.addressingType=="DHCP")&&(this.X_TP_BpaEnable==0)){type="dynamicIp"}else{if((this.enable==1)&&(this.X_TP_BpaEnable==1)){type="bpa"}}}}});$.each(wanPPPList,function(){var tmpStk=$.stkPop(this.__stack,2);if(pStk==tmpStk){if(this.transportType=="PPPoE"){PPPoEStk=this.__stack;PPPoEEnable=this.enable;wan_pppoelist=$.act(ACT_GET,WAN_PPP_CONN,this.__stack,null,null)}if((this.enable==1)&&(this.transportType=="PPPoE")){type="pppoe"}}});if(INCLUDE_L2TP){$.each(wanL2tpList,function(){var tmpStk=$.stkPop(this.__stack,1);if(pStk==tmpStk){l2tpStk=this.__stack;l2tpEnable=this.enable;wan_l2tp_list=$.act(ACT_GET,WAN_L2TP_CONN,this.__stack,null,null);if(this.enable==1){type="l2tp"}}})}if(INCLUDE_PPTP){$.each(wanPptpList,function(){var tmpStk=$.stkPop(this.__stack,1);if(pStk==tmpStk){pptpStk=this.__stack;pptpEnable=this.enable;wan_pptp_list=$.act(ACT_GET,WAN_PPTP_CONN,this.__stack,null,null);if(this.enable==1){type="pptp"}}})}if(!$.exe()){if($.mainParam){$.id("ethWan_en").checked=($.mainParam.split(":")[1]==1)?1:0}else{$.id("ethWan_en").checked=(ethWan.enable==1)?1:0}if(loadType=="static"){$.id("link_type").value="staticIp";initStaticIP()}else{if(loadType=="dynamic"){$.id("link_type").value="dynamicIp";initDynamicIP();doManualDns()}else{if(loadType=="pppoe"){$.id("link_type").value="pppoe";initPPPoE()}else{if(loadType=="l2tp"){$.id("link_type").value="l2tp";initL2TP()}else{if(loadType=="pptp"){$.id("link_type").value="pptp";initPPTP()}else{if(loadType=="bpa"){$.id("link_type").value="bpa";initBPA()}else{if(loadType=="init"){if(type==""){if(ethWan.X_TP_lastUsedIntf=="ipoe_eth3_d"){$.id("link_type").value="dynamicIp";initDynamicIP();doManualDns()}else{if(ethWan.X_TP_lastUsedIntf=="ipoe_eth3_s"){$.id("link_type").value="staticIp";initStaticIP()}else{if(ethWan.X_TP_lastUsedIntf=="pppoe_eth3_d"){$.id("link_type").value="pppoe";initPPPoE()}else{if(ethWan.X_TP_lastUsedIntf=="l2tp_eth3_d"){$.id("link_type").value="l2tp";initL2TP()}else{if(ethWan.X_TP_lastUsedIntf=="pptp_eth3_d"){$.id("link_type").value="pptp";initPPTP()}else{if(ethWan.X_TP_lastUsedIntf=="bpa_eth3_d"){$.id("link_type").value="bpa";initBPA()}else{$.id("link_type").value="dynamicIp";initDynamicIP();doManualDns();$.loadHelp("ethDynamicIp_h.htm")}}}}}}}if(type=="staticIp"){$.id("link_type").value="staticIp";initStaticIP()}else{if(type=="dynamicIp"){$.id("link_type").value="dynamicIp";initDynamicIP();doManualDns()}else{if(type=="pppoe"){$.id("link_type").value="pppoe";initPPPoE()}else{if(type=="l2tp"){$.id("link_type").value="l2tp";initL2TP()}else{if(type=="pptp"){$.id("link_type").value="pptp";initPPTP()}else{if(type=="bpa"){$.id("link_type").value="bpa";initBPA()}}}}}}}}}}}}}loadType="init"}}}function addStaticIpAttrs(){var temp_ip=$.id("ip_address").value;var temp_mask=$.id("netmask").value;var temp_gateway=$.id("ip_gateway").value;if(!INCLUDE_IPV6||$.id("stc_ip4_elem_enable").checked==1){if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_iplistarg_sta.externalIPAddress=$.ip2ip(temp_ip);wan_iplistarg_sta.subnetMask=$.ip2ip(temp_mask)}else{return false}if((temp_gateway=="")||(temp_gateway=="0.0.0.0")){$.alert(ERR_STAIP_GW_INVAD);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}if(($.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}if(isSameSubnet(temp_ip,temp_mask,lanip,lanmask)){$.alert(CMM_WAN_IP_IP_IN_THE_SAME_SUBNET_WITH_LAN);element=$.id("ip_address");if(element){element.focus();element.select()}return false}}wan_iplistarg_sta.defaultGateway=(temp_gateway)?$.ip2ip(temp_gateway):"0.0.0.0";wan_iplistarg_sta.NATEnabled=$.id("enable_nat").checked?1:0;wan_iplistarg_sta.X_TP_FullconeNATEnabled=$.id("enable_fullnat").checked?1:0;wan_iplistarg_sta.X_TP_FirewallEnabled=$.id("enable_spi").checked?1:0;if(!INCLUDE_UN_IPTV){wan_iplistarg_sta.X_TP_IGMPProxyEnabled=$.id("ip_igmp_en").checked?1:0;if(INCLUDE_IGMP_FORCEVERSION&&wan_iplistarg_sta.X_TP_IGMPProxyEnabled){wan_iplistarg_sta.X_TP_IGMPForceVersion=setIGMPForceVersion("ip")}}if(($.id("mtu").value>=576)&&($.id("mtu").value<=1500)){wan_iplistarg_sta.maxMTUSize=parseInt($.id("mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("mtu");if(element){element.focus();element.select()}return false}var temp_dnsaddr=$.id("dns_address").value;var temp_secdnsaddr=$.id("second_dns").value;var temp_dnsServers="";if(!INCLUDE_IPV6||$.id("stc_ip4_elem_enable").checked==1){if((temp_dnsaddr=="")||(temp_dnsaddr=="0.0.0.0")){$.alert(ERR_STAIP_DNS1_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if(($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("second_dns");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_iplistarg_sta.DNSOverrideAllowed=((temp_dnsServers=="0.0.0.0,0.0.0.0")?0:1);wan_iplistarg_sta.DNSServers=temp_dnsServers;if(INCLUDE_IPV6){wan_iplistarg_sta.X_TP_IPv4Enabled=($.id("stc_ip4_elem_enable").checked==1)?1:0;wan_iplistarg_sta.X_TP_IPv6Enabled=($.id("stc_ip6_elem_enable").checked==1)?1:0;if(wan_iplistarg_sta.X_TP_IPv4Enabled==0&&wan_iplistarg_sta.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}wan_iplistarg_sta.X_TP_IPv6AddressingType="Static";var temp_ip6=$.id("stc_ip6_addr").value;var temp_plen=$.id("stc_prefix_len").value;var temp_gateway=$.id("stc_ip6_gateway").value;if($.id("stc_ip6_elem_enable").checked==1){if(!isValidGLUIP6AddrStrict(temp_ip6)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("stc_ip6_addr");if(element){element.focus();element.select()}return false}if(temp_plen!=64){$.alert(ERR_WAN6_PFXLEN_INVAD);element=$.id("stc_prefix_len");if(element){element.focus();element.select()}return false}if(temp_gateway!=""&&temp_gateway!="::"&&!isValidGLUIP6AddrStrict(temp_gateway)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("stc_ip6_gateway");if(element){element.focus();element.select()}return false}}wan_iplistarg_sta.X_TP_ExternalIPv6Address=temp_ip6;wan_iplistarg_sta.X_TP_PrefixLength=temp_plen;wan_iplistarg_sta.X_TP_DefaultIPv6Gateway=(temp_gateway)?temp_gateway:"::";if(wan_iplistarg_sta.X_TP_DefaultIPv6Gateway!="::"){wan_iplistarg_sta.X_TP_DefaultIPv6GatewayOverride=1}var temp_dnsaddr=$.id("dns6_address").value;var temp_secdnsaddr=$.id("second_dns6").value;var temp_dnsServers="";if($.id("stc_ip6_elem_enable").checked==1){if(temp_dnsaddr!=""&&temp_dnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_dnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_address");if(element){element.focus();element.select()}return false}if(temp_secdnsaddr!=""&&temp_secdnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_secdnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("second_dns6");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?temp_dnsaddr:"::";temp_secdnsaddr=(temp_secdnsaddr)?temp_secdnsaddr:"::";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_iplistarg_sta.X_TP_IPv6DNSOverrideAllowed=((temp_dnsServers=="::,::")?0:1);wan_iplistarg_sta.X_TP_IPv6DNSServers=temp_dnsServers;if(INCLUDE_IPV6_MLD){wan_iplistarg_sta.X_TP_MLDProxyEnabled=$.id("ip_mld_en").checked?1:0}}return true}function addDynIpAttrs(){wan_iplistarg_dyn.NATEnabled=$.id("dyn_enable_nat").checked?1:0;wan_iplistarg_dyn.X_TP_FullconeNATEnabled=$.id("dyn_enable_fullnat").checked?1:0;wan_iplistarg_dyn.X_TP_FirewallEnabled=$.id("dyn_ip_spi_en").checked?1:0;if(!INCLUDE_UN_IPTV){wan_iplistarg_dyn.X_TP_IGMPProxyEnabled=$.id("dyn_ip_igmp_en").checked?1:0;if(INCLUDE_IGMP_FORCEVERSION&&wan_iplistarg_dyn.X_TP_IGMPProxyEnabled){wan_iplistarg_dyn.X_TP_IGMPForceVersion=setIGMPForceVersion("dyn_ip")}}if(($.id("dyn_mtu").value>=576)&&($.id("dyn_mtu").value<=1500)){wan_iplistarg_dyn.MaxMTUSize=parseInt($.id("dyn_mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("dyn_mtu");if(element){element.focus();element.select()}return false}if($.id("dynamic_manual_dns").checked==1){wan_iplistarg_dyn.DNSOverrideAllowed=1;var temp_dnsaddr=$.id("dyn_dns1").value;var temp_secdnsaddr=$.id("dyn_dns2").value;var temp_dnsServers="";if(!INCLUDE_IPV6||$.id("dyn_ip4_elem_enable").checked==1){if((temp_dnsaddr!="")&&(temp_dnsaddr!="0.0.0.0")&&($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("second_dns");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";if(!INCLUDE_IPV6||$.id("dyn_ip4_elem_enable").checked==1){if((temp_dnsaddr+","+temp_secdnsaddr)=="0.0.0.0,0.0.0.0"){$.alert(ERR_WAN_DNS_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}}wan_iplistarg_dyn.DNSServers=temp_dnsaddr+","+temp_secdnsaddr}else{wan_iplistarg_dyn.DNSOverrideAllowed=0}if(!charCompareA($.id("hostname").value,63,0)){$.alert(ERR_WAN_HOST_NAME_INVALID);var element=$.id("hostname");if(element){element.focus();element.select()}return false}wan_iplistarg_dyn.X_TP_Hostname=$.id("hostname").value;wan_iplistarg_dyn.X_TP_Unicast=$.id("unicast").checked==1?1:0;if(INCLUDE_IPV6){wan_iplistarg_dyn.X_TP_IPv4Enabled=($.id("dyn_ip4_elem_enable").checked==1)?1:0;wan_iplistarg_dyn.X_TP_IPv6Enabled=($.id("dyn_ip6_elem_enable").checked==1)?1:0;if(wan_iplistarg_dyn.X_TP_IPv4Enabled==0&&wan_iplistarg_dyn.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}wan_iplistarg_dyn.X_TP_IPv6AddressingType="DHCPv6";if(INCLUDE_IPV6_SLAAC){if($.id("dyn_ip6addr_type").value=="autoip"){wan_iplistarg_dyn.X_TP_IPv6AddressingType="SLAAC"}}if($.id("dynamic_manual_dns6").checked==1){wan_iplistarg_dyn.X_TP_IPv6DNSOverrideAllowed=1;var temp_dnsaddr=$.id("dyn_dns6_1").value;var temp_secdnsaddr=$.id("dyn_dns6_2").value;if($.id("dyn_ip6_elem_enable").checked==1){if(temp_dnsaddr!=""&&temp_dnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_dnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dyn_dns6_1");if(element){element.focus();element.select()}return false}if(temp_secdnsaddr!=""&&temp_secdnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_secdnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dyn_dns6_2");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?temp_dnsaddr:"::";temp_secdnsaddr=(temp_secdnsaddr)?temp_secdnsaddr:"::";if($.id("dyn_ip6_elem_enable").checked==1&&(temp_dnsaddr+","+temp_secdnsaddr)=="::,::"){$.alert(ERR_WAN6_DNS_INVAD);element=$.id("dyn_dns6_1");if(element){element.focus();element.select()}return false}wan_iplistarg_dyn.X_TP_IPv6DNSServers=temp_dnsaddr+","+temp_secdnsaddr}else{wan_iplistarg_dyn.X_TP_IPv6DNSOverrideAllowed=0}if(INCLUDE_IPV6_MLD){wan_iplistarg_dyn.X_TP_MLDProxyEnabled=$.id("dyn_ip_mld_en").checked?1:0}}return true}function addSecondaryConnAttrs(){if($.id("secConnType_dyn").checked==true){wan_iplistarg_dyn.NATEnabled=wan_pppoelistarg.NATEnabled;wan_iplistarg_dyn.X_TP_FullconeNATEnabled=wan_pppoelistarg.X_TP_FullconeNATEnabled;wan_iplistarg_dyn.X_TP_FirewallEnabled=wan_pppoelistarg.X_TP_FirewallEnabled;if(!INCLUDE_UN_IPTV){wan_iplistarg_dyn.X_TP_IGMPProxyEnabled=wan_pppoelistarg.X_TP_IGMPProxyEnabled;if(INCLUDE_IGMP_FORCEVERSION&&wan_iplistarg_dyn.X_TP_IGMPProxyEnabled){wan_iplistarg_dyn.X_TP_IGMPForceVersion=setIGMPForceVersion("ppp")}}wan_iplistarg_dyn.DNSOverrideAllowed=0;wan_iplistarg_dyn.MaxMTUSize=1500;wan_pppoelistarg.secondConnection="sec_conn_dynip"}else{if($.id("secConnType_sta").checked==true){var temp_ip=$.id("secondStaIpAddress").value;var temp_mask=$.id("secondStaIpMask").value;if(isSameSubnet(temp_ip,temp_mask,lanip,lanmask)){$.alert(CMM_WAN_IP_IP_IN_THE_SAME_SUBNET_WITH_LAN);element=$.id("secondStaIpAddress");if(element){element.focus();element.select()}return false}if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_iplistarg_sta.externalIPAddress=$.ip2ip(temp_ip);wan_iplistarg_sta.subnetMask=$.ip2ip(temp_mask);wan_iplistarg_sta.defaultGateway="0.0.0.0";wan_iplistarg_sta.DNSOverrideAllowed=0;wan_iplistarg_sta.DNSServers="0.0.0.0,0.0.0.0";wan_iplistarg_sta.NATEnabled=wan_pppoelistarg.NATEnabled;wan_iplistarg_sta.X_TP_FullconeNATEnabled=wan_pppoelistarg.X_TP_FullconeNATEnabled;wan_iplistarg_sta.X_TP_FirewallEnabled=wan_pppoelistarg.X_TP_FirewallEnabled;if(!INCLUDE_UN_IPTV){wan_iplistarg_sta.X_TP_IGMPProxyEnabled=wan_pppoelistarg.X_TP_IGMPProxyEnabled;if(INCLUDE_IGMP_FORCEVERSION&&wan_iplistarg_sta.X_TP_IGMPProxyEnabled){wan_iplistarg_sta.X_TP_IGMPForceVersion=setIGMPForceVersion("ppp")}}wan_iplistarg_sta.maxMTUSize=1500;wan_pppoelistarg.secondConnection="sec_conn_staip"}else{return false}}else{wan_iplistarg_sta.externalIPAddress=$.ip2ip("169.254.1.1");wan_iplistarg_sta.subnetMask=$.ip2ip("255.255.255.255");wan_iplistarg_sta.defaultGateway="0.0.0.0";wan_iplistarg_sta.DNSOverrideAllowed=0;wan_iplistarg_sta.DNSServers="0.0.0.0,0.0.0.0";wan_iplistarg_sta.NATEnabled=wan_pppoelistarg.NATEnabled;wan_iplistarg_sta.X_TP_FullconeNATEnabled=wan_pppoelistarg.X_TP_FullconeNATEnabled;wan_iplistarg_sta.X_TP_FirewallEnabled=wan_pppoelistarg.X_TP_FirewallEnabled;if(!INCLUDE_UN_IPTV){wan_iplistarg_sta.X_TP_IGMPProxyEnabled=wan_pppoelistarg.X_TP_IGMPProxyEnabled;if(INCLUDE_IGMP_FORCEVERSION&&wan_iplistarg_sta.X_TP_IGMPProxyEnabled){wan_iplistarg_sta.X_TP_IGMPForceVersion=setIGMPForceVersion("ppp")}}wan_iplistarg_sta.maxMTUSize=1500;wan_pppoelistarg.secondConnection="sec_conn_staip"}}return true}function addPPPoEAttrs(){if($.id("username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("username");if(element){element.focus();element.select()}return false}wan_pppoelistarg.username=$.id("username").value;if($.id("pwd").value!=$.id("pwd2").value){$.id("pwd").value="";$.id("pwd2").value="";$.alert(ERR_PWD_INVAD);element=$.id("pwd");if(element){element.focus();element.select()}return false}wan_pppoelistarg.password=$.id("pwd").value;if(INCLUDE_SPECIAL_DIAL_MODE){wan_pppoelistarg.X_TP_SpecialDail=$.id("speDail").value}if($.id("connAlwaysOn").checked==1){wan_pppoelistarg.connectionTrigger="AlwaysOn"}else{if(($.id("idleTime").value)&&($.isnum($.id("idleTime").value))){wan_pppoelistarg.idleDisconnectTime=parseInt($.id("idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("idleTime");if(element){element.focus();element.select()}return false}if($.id("connOnDemand").checked==1){wan_pppoelistarg.connectionTrigger="OnDemand"}else{if($.id("connManual").checked==1){wan_pppoelistarg.connectionTrigger="Manual"}}}wan_pppoelistarg.PPPAuthenticationProtocol=$.id("ppp_authpro").value;wan_pppoelistarg.PPPoEACName=$.id("acName").value;wan_pppoelistarg.PPPoEServiceName=$.id("serviceName").value;if(($.id("pppmtu").value>=576)&&($.id("pppmtu").value<=1492)){wan_pppoelistarg.maxMRUSize=parseInt($.id("pppmtu").value,10)}else{$.alert(ERR_WAN_PPPOE_MTU_INVAD);element=$.id("pppmtu");if(element){element.focus();element.select()}return false}wan_pppoelistarg.NATEnabled=wan_pppoelist.NATEnabled;wan_pppoelistarg.X_TP_FullconeNATEnabled=($.id("ppp_fullnat_en").checked==1)?1:0;wan_pppoelistarg.X_TP_FirewallEnabled=($.id("ppp_spi_en").checked==1)?1:0;if(!INCLUDE_UN_IPTV){wan_pppoelistarg.X_TP_IGMPProxyEnabled=($.id("ppp_igmp_en").checked==1)?1:0;if(INCLUDE_IGMP_FORCEVERSION&&wan_pppoelistarg.X_TP_IGMPProxyEnabled){wan_pppoelistarg.X_TP_IGMPForceVersion=setIGMPForceVersion("ppp")}}if($.id("externIp_en").checked==1){if(($.id("externIpAddr").value!="")&&($.id("externIpAddr").value!="0.0.0.0")&&($.ifip($.id("externIpAddr").value,true))&&(!INCLUDE_IPV6||$.id("ppp_ip4_elem_enable").checked==1)){$.alert(ERR_IP_FORMAT);element=$.id("externIpAddr");if(element){element.focus();element.select()}return false}wan_pppoelistarg.externalIPAddress=($.id("externIpAddr").value)?$.ip2ip($.id("externIpAddr").value):"0.0.0.0";wan_pppoelistarg.X_TP_UseStaticIP=1}else{if($.id("externIp_en").checked==0){wan_pppoelistarg.X_TP_UseStaticIP=0}}if((parseInt($.id("ppp_echotime").value,10)>=0)&&(parseInt($.id("ppp_echotime").value,10)<=120)){wan_pppoelistarg.PPPLCPEcho=parseInt($.id("ppp_echotime").value,10)}else{$.alert(ERR_WAN_ECHOTIME_INVAD);element=$.id("ppp_echotime");if(element){element.focus();element.select()}return false}if($.id("dns_en").checked==1&&(!INCLUDE_IPV6||$.id("ppp_ip4_elem_enable").checked==1)){if(($.id("dns1").value!="")&&($.id("dns1").value!="0.0.0.0")&&($.ifip($.id("dns1").value,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns1");if(element){element.focus();element.select()}return false}if(($.id("dns2").value!="")&&($.id("dns2").value!="0.0.0.0")&&($.ifip($.id("dns2").value,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("dns2");if(element){element.focus();element.select()}return false}var tmpDns1=($.id("dns1").value)?$.ip2ip($.id("dns1").value):"0.0.0.0";var tmpDns2=($.id("dns2").value)?$.ip2ip($.id("dns2").value):"0.0.0.0";wan_pppoelistarg.DNSOverrideAllowed=1;wan_pppoelistarg.DNSServers=tmpDns1+","+tmpDns2}else{wan_pppoelistarg.DNSOverrideAllowed=0}if(INCLUDE_IPV6){wan_pppoelistarg.X_TP_IPv4Enabled=($.id("ppp_ip4_elem_enable").checked==1)?1:0}if(INCLUDE_DUAL_ACCESS){return addSecondaryConnAttrs()}return true}function addL2tpAttrs(){if($.id("ppp_username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("ppp_username");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.username=$.id("ppp_username").value;if($.id("ppp_pwd").value==""){$.alert(ERR_WAN_PWD_INVAD);element=$.id("ppp_pwd");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.password=$.id("ppp_pwd").value;if($.id("srvAddrName").value==""){$.alert(ERR_WAN_DA_SERVER_NAME_EMPTY);element=$.id("srvAddrName");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.serverIpOrName=$.id("srvAddrName").value;if($.id("ipType_stc").checked==1){var temp_ip=$.id("isp_ip_stc").value;var temp_mask=$.id("isp_net_mask_stc").value;var temp_gateway=$.id("isp_gw_stc").value;wan_l2tp_listarg.addressingType="Static";if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_l2tp_listarg.externalIPAddressIP=$.ip2ip(temp_ip);wan_l2tp_listarg.subnetMaskIP=$.ip2ip(temp_mask)}else{return false}if((temp_gateway=="")||(temp_gateway!="0.0.0.0"&&$.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}if(temp_gateway=="0.0.0.0"){$.alert(ERR_GATEWAY_INVAD);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.defaultGatewayIP=$.ip2ip(temp_gateway);var temp_dnsaddr=$.id("isp_dns_1_stc").value;var temp_secdnsaddr=$.id("isp_dns_2_stc").value;var temp_dnsServers="";if((temp_dnsaddr=="")||(temp_dnsaddr=="0.0.0.0")){$.alert(ERR_STAIP_DNS1_INVAD);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}if(($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("isp_dns_2_stc");if(element){element.focus();element.select()}return false}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_l2tp_listarg.DNSServersIP=temp_dnsServers;if($.ifip(wan_l2tp_listarg.serverIpOrName,true)&&temp_dnsaddr=="0.0.0.0"&&temp_secdnsaddr=="0.0.0.0"){$.alert(ERR_WAN_DA_DNS_EMPTY);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}}else{wan_l2tp_listarg.addressingType="DHCP"}if(($.id("l2tp_mtu").value>=576)&&($.id("l2tp_mtu").value<=1460)){wan_l2tp_listarg.maxMRUSize=parseInt($.id("l2tp_mtu").value,10)}else{$.alert(ERR_WAN_L2TP_MTU_INVAD);element=$.id("l2tp_mtu");if(element){element.focus();element.select()}return false}if(!INCLUDE_UN_IPTV){wan_l2tp_listarg.IGMPProxyEnabled=$.id("l2tp_igmp_en").checked==true?1:0;if(INCLUDE_IGMP_FORCEVERSION&&wan_l2tp_listarg.IGMPProxyEnabled){wan_l2tp_listarg.IGMPForceVersion=setIGMPForceVersion("l2tp")}}if($.id("da_connAlwaysOn").checked==1){wan_l2tp_listarg.connectionTrigger="AlwaysOn"}else{if(($.id("da_idleTime").value)&&($.isnum($.id("da_idleTime").value))){wan_l2tp_listarg.idleDisconnectTime=parseInt($.id("da_idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("da_idleTime");if(element){element.focus();element.select()}return false}if($.id("da_connOnDemand").checked==1){wan_l2tp_listarg.connectionTrigger="OnDemand"}else{if($.id("da_connManual").checked==1){wan_l2tp_listarg.connectionTrigger="Manual"}}}return true}function addPptpAttrs(){if($.id("ppp_username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("ppp_username");if(element){element.focus();element.select()}return false}wan_pptp_listarg.username=$.id("ppp_username").value;if($.id("ppp_pwd").value==""){$.alert(ERR_WAN_PWD_INVAD);element=$.id("ppp_pwd");if(element){element.focus();element.select()}return false}wan_pptp_listarg.password=$.id("ppp_pwd").value;if($.id("srvAddrName").value==""){$.alert(ERR_WAN_DA_SERVER_NAME_EMPTY);element=$.id("srvAddrName");if(element){element.focus();element.select()}return false}wan_pptp_listarg.serverIpOrName=$.id("srvAddrName").value;if($.id("ipType_stc").checked==1){var temp_ip=$.id("isp_ip_stc").value;var temp_mask=$.id("isp_net_mask_stc").value;var temp_gateway=$.id("isp_gw_stc").value;wan_pptp_listarg.addressingType="Static";if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_pptp_listarg.externalIPAddressIP=$.ip2ip(temp_ip);wan_pptp_listarg.subnetMaskIP=$.ip2ip(temp_mask)}else{return false}if((temp_gateway=="")||(temp_gateway!="0.0.0.0"&&$.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}if(temp_gateway=="0.0.0.0"){$.alert(ERR_GATEWAY_INVAD);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}wan_pptp_listarg.defaultGatewayIP=$.ip2ip(temp_gateway);var temp_dnsaddr=$.id("isp_dns_1_stc").value;var temp_secdnsaddr=$.id("isp_dns_2_stc").value;var temp_dnsServers="";if((temp_dnsaddr=="")||(temp_dnsaddr=="0.0.0.0")){$.alert(ERR_STAIP_DNS1_INVAD);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}if(($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("isp_dns_2_stc");if(element){element.focus();element.select()}return false}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_pptp_listarg.DNSServersIP=temp_dnsServers;if($.ifip(wan_pptp_listarg.serverIpOrName,true)&&temp_dnsaddr=="0.0.0.0"&&temp_secdnsaddr=="0.0.0.0"){$.alert(ERR_WAN_DA_DNS_EMPTY);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}}else{wan_pptp_listarg.addressingType="DHCP"}if(($.id("pptp_mtu").value>=576)&&($.id("pptp_mtu").value<=1420)){wan_pptp_listarg.maxMRUSize=parseInt($.id("pptp_mtu").value,10)}else{$.alert(ERR_WAN_PPTP_MTU_INVAD);element=$.id("pptp_mtu");if(element){element.focus();element.select()}return false}if(!INCLUDE_UN_IPTV){wan_pptp_listarg.IGMPProxyEnabled=$.id("pptp_igmp_en").checked==true?1:0;if(INCLUDE_IGMP_FORCEVERSION&&wan_pptp_listarg.IGMPProxyEnabled){wan_pptp_listarg.IGMPForceVersion=setIGMPForceVersion("pptp")}}if($.id("da_connAlwaysOn").checked==1){wan_pptp_listarg.connectionTrigger="AlwaysOn"}else{if(($.id("da_idleTime").value)&&($.isnum($.id("da_idleTime").value))){wan_pptp_listarg.idleDisconnectTime=parseInt($.id("da_idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("da_idleTime");if(element){element.focus();element.select()}return false}if($.id("da_connOnDemand").checked==1){wan_pptp_listarg.connectionTrigger="OnDemand"}else{if($.id("da_connManual").checked==1){wan_pptp_listarg.connectionTrigger="Manual"}}}return true}function addBpaAttrs(){if(!INCLUDE_UN_IPTV){wan_bpa_listarg.X_TP_IGMPProxyEnabled=$.id("bpa_igmp_en").checked?1:0;if(INCLUDE_IGMP_FORCEVERSION&&wan_bpa_listarg.X_TP_IGMPProxyEnabled){wan_bpa_listarg.X_TP_IGMPForceVersion=setIGMPForceVersion("bpa")}}if(($.id("bpa_mtu").value>=576)&&($.id("bpa_mtu").value<=1500)){wan_bpa_listarg.MaxMTUSize=parseInt($.id("bpa_mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("bpa_mtu");if(element){element.focus();element.select()}return false}if($.id("bpa_username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("bpa_username");if(element){element.focus();element.select()}return false}wan_bpa_listarg.X_TP_BpaUsername=$.id("bpa_username").value;if($.id("bpa_pwd").value==""){$.alert(ERR_WAN_PWD_INVAD);element=$.id("bpa_pwd");if(element){element.focus();element.select()}return false}wan_bpa_listarg.X_TP_BpaPassword=$.id("bpa_pwd").value;if($.id("bpa_authserver").value==""){$.alert(ERR_WAN_BPA_AUTHSERVER_INVAD);element=$.id("bpa_authserver");if(element){element.focus();element.select()}return false}wan_bpa_listarg.X_TP_BpaAuthServer=$.id("bpa_authserver").value;if($.id("bpa_authdomain").value==""){$.alert(ERR_AUTHDOMAIN_INVAD);element=$.id("bpa_authdomain");if(element){element.focus();element.select()}return false}wan_bpa_listarg.X_TP_BpaAuthDomain=$.id("bpa_authdomain").value;if($.id("bpa_connAlwaysOn").checked==1){wan_bpa_listarg.X_TP_BpaConnectionTrigger="AlwaysOn"}else{if(($.id("bpa_idleTime").value)&&($.isnum($.id("bpa_idleTime").value))){wan_bpa_listarg.X_TP_BpaIdleDisconnectTime=parseInt($.id("bpa_idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("bpa_idleTime");if(element){element.focus();element.select()}return false}if($.id("bpa_connOnDemand").checked==1){wan_bpa_listarg.X_TP_BpaConnectionTrigger="OnDemand"}else{if($.id("bpa_connManual").checked==1){wan_bpa_listarg.X_TP_BpaConnectionTrigger="Manual"}}}return true}function doSave(val){if($.id("link_type").value=="staticIp"){var ret;if(!(ret=addStaticIpAttrs())){return}}else{if($.id("link_type").value=="dynamicIp"){var ret;if(!(ret=addDynIpAttrs())){return}}else{if($.id("link_type").value=="pppoe"){var ret;if(!(ret=addPPPoEAttrs())){return}}else{if($.id("link_type").value=="l2tp"){var ret;if(!(ret=addL2tpAttrs())){return}}else{if($.id("link_type").value=="pptp"){var ret;if(!(ret=addPptpAttrs())){return}}else{if($.id("link_type").value=="bpa"){var ret;if(!(ret=addBpaAttrs())){return}}}}}}}$.addLoading($.id("saveBtn"));var ethEnable=$.id("ethWan_en").checked?1:0;if(ethEnable==0){$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["enable=0"])}else{if(ethEnable==1){$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["enable=1"])}}if($.id("link_type").value=="staticIp"){if(oldStaIp.substring(0,4)=="169."){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0","secondConnection=sec_conn_disable"])}else{if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}}if(l2tpEnable==1){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if(pptpEnable==1){$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,["enable=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if((ethEnable==0)&&(staticEnable==1)){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(bpaEnable==1){$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,["enable=0"])}if(PPPoEEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(!$.exe()){wan_iplistarg_sta.enable=1;$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["X_TP_lastUsedIntf=ipoe_eth3_s","X_TP_lastUsedName="+wan_iplist_sta.name]);$.act(ACT_SET,WAN_IP_CONN,staticStk,null,wan_iplistarg_sta)}else{return}}else{if($.id("link_type").value=="dynamicIp"){if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(l2tpEnable==1){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if(pptpEnable==1){$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,["enable=0"])}if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if((ethEnable==0)&&(dynEnable==1)){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(bpaEnable==1){$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,["enable=0"])}if(PPPoEEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(!$.exe()){wan_iplistarg_dyn.enable=1;$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["X_TP_lastUsedIntf=ipoe_eth3_d","X_TP_lastUsedName="+wan_iplist_dyn.name]);$.act(ACT_SET,WAN_IP_CONN,dynStk,null,wan_iplistarg_dyn)}else{return}}else{if($.id("link_type").value=="pppoe"){if(INCLUDE_DUAL_ACCESS&&$.id("secConnType_disable").checked==false){if($.id("secConnType_dyn").checked==true){if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}}else{if($.id("secConnType_sta").checked==true){if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}}}}else{if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}}if(l2tpEnable==1){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if(pptpEnable==1){$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,["enable=0"])}if((ethEnable==0)&&(PPPoEEnable==1)){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(bpaEnable==1){$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,["enable=0"])}if(!$.exe()){wan_pppoelistarg.enable=1;$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["X_TP_lastUsedIntf=pppoe_eth3_d","X_TP_lastUsedName="+wan_pppoelist.name]);if(INCLUDE_DUAL_ACCESS){if($.id("secConnType_dyn").checked==true){wan_iplistarg_dyn.enable=1;$.act(ACT_SET,WAN_IP_CONN,dynStk,null,wan_iplistarg_dyn)}else{wan_iplistarg_sta.enable=1;$.act(ACT_SET,WAN_IP_CONN,staticStk,null,wan_iplistarg_sta)}}$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,wan_pppoelistarg)}else{return}}else{if($.id("link_type").value=="l2tp"){if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(pptpEnable==1){$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,["enable=0"])}if((ethEnable==0)&&(l2tpEnable==1)){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(bpaEnable==1){$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,["enable=0"])}if(!$.exe()){wan_l2tp_listarg.enable=1;$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["X_TP_lastUsedIntf=l2tp_eth3_d","X_TP_lastUsedName="+wan_l2tp_list.name]);$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,wan_l2tp_listarg)}else{return}}else{if($.id("link_type").value=="pptp"){if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(l2tpEnable==1){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if((ethEnable==0)&&(pptpEnable==1)){$.act(ACT_SET,WAN_L2TP_CONN,pptpStk,null,["enable=0"])}if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(bpaEnable==1){$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,["enable=0"])}if(!$.exe()){wan_pptp_listarg.enable=1;$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["X_TP_lastUsedIntf=pptp_eth3_d","X_TP_lastUsedName="+wan_pptp_list.name]);$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,wan_pptp_listarg)}else{return}}else{if($.id("link_type").value=="bpa"){if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(l2tpEnable==1){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if(pptpEnable==1){$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,["enable=0"])}if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if((ethEnable==0)&&(bpaEnable==1)){$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,["enable=0"])}if(!$.exe()){wan_bpa_listarg.enable=1;$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["X_TP_lastUsedIntf=bpa_eth3_d","X_TP_lastUsedName="+wan_bpa_list.name]);$.act(ACT_SET,WAN_IP_CONN,bpaStk,null,wan_bpa_listarg)}else{return}}}}}}}$.exe(function(err){if(!err){if(val==0){if($.id("link_type").value=="staticIp"){var ipConn=$.act(ACT_GET,WAN_IP_CONN,staticStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=ipConn.name}else{return}}else{if($.id("link_type").value=="dynamicIp"){var ipConn=$.act(ACT_GET,WAN_IP_CONN,dynStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=ipConn.name}else{return}}else{if($.id("link_type").value=="pppoe"){var pppConn=$.act(ACT_GET,WAN_PPP_CONN,PPPoEStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=pppConn.name}else{return}}else{if($.id("link_type").value=="l2tp"){var l2tpConn=$.act(ACT_GET,WAN_L2TP_CONN,l2tpStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=l2tpConn.name}else{return}}else{if($.id("link_type").value=="pptp"){var pptpConn=$.act(ACT_GET,WAN_PPTP_CONN,pptpStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=pptpConn.name}else{return}}}}}}if($.id("link_type").value=="bpa"){var ipConn=$.act(ACT_GET,WAN_IP_CONN,bpaStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=ipConn.name}else{return}}l3ForwardingObj.__ifName="";l3ForwardingObj.defaultConnectionService="";if(INCLUDE_IPV6){l3Ip6ForwardingObj.__ifAliasName=l3ForwardingObj.__ifAliasName;l3Ip6ForwardingObj.__ifName="";l3Ip6ForwardingObj.defaultConnectionService="";ip4Enable=(wan_iplistarg_sta.X_TP_IPv4Enabled==1||wan_iplistarg_dyn.X_TP_IPv4Enabled==1||wan_pppoelistarg.X_TP_IPv4Enabled==1||wan_l2tp_listarg.enable==1||wan_pptp_listarg.enable==1||wan_bpa_listarg.enable==1)?1:0;ip6Enable=(wan_iplistarg_sta.X_TP_IPv6Enabled==1||wan_iplistarg_dyn.X_TP_IPv6Enabled==1||wan_pppoelistarg.X_TP_IPv6Enabled==1)?1:0}if(!INCLUDE_IPV6||INCLUDE_IPV6&&ip4Enable==1){$.act(ACT_SET,L3_FORWARDING,null,null,l3ForwardingObj)}if(INCLUDE_IPV6&&ip6Enable==1){$.act(ACT_SET,L3_IP6_FORWARDING,null,null,l3Ip6ForwardingObj)}if(!$.exe()){$.reload()}}}})}function doDhcp6Renew(){}function doDhcp6Release(){}function doDhcpRenew(){$.id("renew").disabled=1;$.act(ACT_OP,ACT_OP_DHCP_RENEW,wan_iplist_dyn.__stack);$.removeClass($.id("DynIpConnecting"),"nd");$.addLoading($.id("renew"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDhcpRelease(){$.id("release").disabled=1;$.act(ACT_OP,ACT_OP_DHCP_RELEASE,wan_iplist_dyn.__stack);$.addLoading($.id("release"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doConn(){doSave(1);$.id("conn").disabled=1;$.act(ACT_OP,ACT_OP_PPP_CONN,wan_pppoelist.__stack);$.removeClass($.id("PPPoEConnecting"),"nd");$.addLoading($.id("conn"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDisConn(){$.id("disConn").disabled=1;$.act(ACT_OP,ACT_OP_PPP_DISCONN,wan_pppoelist.__stack);$.addLoading($.id("disConn"));if(!$.exe()){doSave(1);$.timeout(function(){$.reload()},1500)}}function doConn2(){doSave(0);$.id("conn2").disabled=1;if($.id("link_type").value=="l2tp"){$.act(ACT_OP,ACT_OP_L2TP_CONN,wan_l2tp_list.__stack)}else{if($.id("link_type").value=="pptp"){$.act(ACT_OP,ACT_OP_PPTP_CONN,wan_pptp_list.__stack)}}$.removeClass($.id("L2tpPptpConnecting"),"nd");$.addLoading($.id("conn2"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDisConn2(){$.id("disConn2").disabled=1;if($.id("link_type").value=="l2tp"){$.act(ACT_OP,ACT_OP_L2TP_DISCONN,wan_l2tp_list.__stack)}else{if($.id("link_type").value=="pptp"){$.act(ACT_OP,ACT_OP_PPTP_DISCONN,wan_pptp_list.__stack)}}$.addLoading($.id("disConn2"));if(!$.exe()){doSave(1);$.timeout(function(){$.reload()},1500)}}function doConnBpa(){doSave(0);$.id("bpa_conn").disabled=1;$.act(ACT_OP,ACT_OP_BPA_CONN,wan_bpa_list.__stack);$.removeClass($.id("BpaConnecting"),"nd");$.addLoading($.id("bpa_conn"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDisConnBpa(){$.id("bpa_disConn").disabled=1;$.act(ACT_OP,ACT_OP_BPA_DISCONN,wan_bpa_list.__stack);$.addLoading($.id("bpa_disConn"));if(!$.exe()){doSave(1);$.timeout(function(){$.reload()},1500)}}function checkPwd(){if($.id("pwd2").value!=$.id("pwd").value){$.id("pwd").value="";$.id("pwd2").value="";$.alert(ERR_PWD_INVAD);element=$.id("pwd");if(element){element.focus();element.select()}return false}}function showDyn(){$.removeClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_stc_ip_elem"),"nd")}function showStc(){$.removeClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_dyn_ip_elem"),"nd")}function wanDetecting(){var wanTypeObj=$.act(ACT_GET,WAN_TYPE_DETECT,null,null,["state","wanType"]);if(!$.exe()){if(wanTypeObj.state==3){switch(wanTypeObj.wanType){case"0":$.id("status").innerHTML="&nbsp;<span style='color:#005564' id='t_dyma_ip' name='t_dyma_ip'>"+s_str.dynip+"</span>";break;case"1":$.id("status").innerHTML="&nbsp;<span style='color:#005564' id='t_stat_ip' name='t_stat_ip'>"+s_str.staip+"</span>";break;case"2":$.id("status").innerHTML="&nbsp;<span style='color:#005564' id='t_pppoe' name='t_pppoe'>"+s_str.pppoe_ru+"</span>";break;default:break}}else{$.timeout(function(){wanDetecting()},1500)}}}function doWanDetect(){var wanEthIntfObj=$.act(ACT_GET,WAN_ETH_INTF,pStk,null,["status"]);if(!$.exe()){if(sysMode!="Hotspot"&&wanEthIntfObj.status=="NoLink"){$.id("status").innerHTML="&nbsp;<span style='color:#C11C66' id='t_unplugged'>"+m_str.unplugged+"</span>";return}else{$.act(ACT_OP,ACT_OP_WAN_TYPE_DETECT,null);if(!$.exe()){$.id("status").innerHTML="&nbsp;<span style='color:#005564' id='t_det'>"+m_str.detecting+"</span>";$.timeout(function(){wanDetecting()},1500)}}}}function showSecondConnect(ipType){if(ipType){if(ipType=="dynamic"){$.removeClass($.id("secondDynIp"),"nd");$.addClass($.id("secondStaIp"),"nd")}else{$.removeClass($.id("secondStaIp"),"nd");$.addClass($.id("secondDynIp"),"nd")}}else{$.addClass($.id("secondStaIp"),"nd");$.addClass($.id("secondDynIp"),"nd")}}function initIGMPForceVersion(wanType,forceVersion){if(INCLUDE_IGMP_FORCEVERSION){if($.id(wanType+"_igmp_en").checked==true){$.removeClass($.id(wanType+"_igmpversion"),"nd")}if(forceVersion==2){$.id(wanType+"_igmp_v2").checked=true}else{if(forceVersion==0){$.id(wanType+"_igmp_v3").checked=true}}}}function setIGMPForceVersion(wanType){if(INCLUDE_IGMP_FORCEVERSION){if($.id(wanType+"_igmp_v2").checked==true){return 2}else{if($.id(wanType+"_igmp_v3").checked==true){return 0}}}}function igmpClick(wanType){if(INCLUDE_IGMP_FORCEVERSION){if($.id(wanType+"_igmp_en").checked==true){$.removeClass($.id(wanType+"_igmpversion"),"nd")}else{$.addClass($.id(wanType+"_igmpversion"),"nd")}}};</script>
<p class="et T" id="et">WAN Setting</p>
<div class="con1 L">
<p class="ct"></p>
<p class="bl"></p>
<div class="con2">

<p id="ethEnable" class="L1"><input type="checkbox" id="ethWan_en" checked /><span class="T" id="t_en">Enable WAN connection</span></p>
<p class="br"></p>
<p><b class="item L T T_conntype">Connetion Type</b>
<select id="link_type" class="L" onchange="showLnkType();" >
<option class="T T_dynip" id="dynamicIp" value="dynamicIp" selected >Dynamic IP</option>
<option class="T T_staip" id="staticIp" value="staticIp">Static IP</option>
<option id="pppoe" value="pppoe" >PPPoE</option>
</select>
<input type="button" class="button M T T_detect" id="detect" value="Detect" onclick="doWanDetect()"/>
<span id="status"></span>
</p>
<p class="br"></p>

<div id="dyn_ip_elem_basic">
	<div id="dyn_ipx_check4" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" class="T" id="dyn_ip4_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="dyn_ip4_elem_basic">
		<p><b class="item L T T_ipaddr" id="ip_addr1">IP Address:</b><b style="padding-left:12px" id="dyn_ip">0.0.0.0</b></p>
		<p><b class="item L T T_netmask" id="subnet_mask1">Subnet Mask:</b><b style="padding-left:12px" id="dyn_mask">0.0.0.0</b></p>
		<p><b class="item L T T_gateway" id="gateway1">Gateway:</b><b style="padding-left:12px" id="dyn_gw">0.0.0.0</b></p>
		<p class="br"></p>
		<p><b class="item">&nbsp;</b><input type="button" class="button M T T_renew" id="renew" value="Renew" disabled onclick="doDhcpRenew()"/>
		<input type="button" class="button M T T_release" id="release" value="Release" disabled onclick="doDhcpRelease()"/>
		<span id="DynIpConnecting" class="nd">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
		</p>
	</div>
	<p class="br IPv6 nd"></p>
	<div id="dyn_ipx_check6" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" class="T" id="dyn_ip6_elem_enable" onclick="ShowDiv(this)" /></p>
	</div>
	<div id="dyn_ip6_elem_basic" class="nd">
		<p><b class="item L T T_ip6addr">IPv6 Address:</b><b style="padding-left:12px" id="dyn_ip6_addr">::</b></p>
		<p><b class="item L T T_plen">Prefix Length:</b><b style="padding-left:12px" id="dyn_prefix_len">0</b></p>
		<p><b class="item L T T_ip6gw">IPv6 Gateway:</b><b style="padding-left:12px" id="dyn_ip6_gw">::</b></p>
		<div id="ipv6_cfg_dynamic_slaac" class="IPv6 nd">
			<p class="IPv6 nd"><b class="item L T T_ip6addrconf">IPv6 Autoconfiguration Type</b>
			<select id="dyn_ip6addr_type" class="L">
			<option value="dhcp" selected="selected">DHCPv6</option>
			<option value="autoip">SLAAC</option>
			</select></p>
		</div>
	</div>
</div>

<div id="ip_elem_basic" class="nd">
	<div id="stc_ipx_check4" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" class="T" id="stc_ip4_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="stc_ip4_elem_basic">
		<p><b class="item L T T_ipaddr">IP Address:</b><input type="text" class="text" id="ip_address" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_netmask">Subnet Mask:</b><input type="text" class="text" id="netmask" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_gateway">Gateway:</b><input type="text" class="text" id="ip_gateway" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_primarydns">Primary DNS Server:</b><input type="text" class="text" id="dns_address" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" id="second_dns" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
	</div>
	<p class="br IPv6 nd"></p>
	<div id="stc_ipx_check6" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" class="T" id="stc_ip6_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="stc_ip6_elem_basic" class="nd">
		<p><b class="item L T T_ip6addr">IPv6 Address:</b><input type="text" class="text" id="stc_ip6_addr" value="::" size="15" maxlength="40" /></p>
		<p><b class="item L T T_plen">Prefix Length:</b><input type="text" class="text" id="stc_prefix_len" value="64" size="15" maxlength="15" /></p>
		<p><b class="item L T T_ip6gw">IPv6 Gateway:</b><input type="text" class="text" id="stc_ip6_gateway" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
		<p><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" id="dns6_address" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
		<p><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" id="second_dns6" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
	</div>
</div>

<div id="pppoe_elem_basic" class="nd">
	<p class="L1"></p>
	<p><b class="item L T T_pppusr">PPP Username:</b><input type="text" class="text" size="15" id="username" maxlength="255" /></p>
	<p><b class="item L T T_ppppwd">PPP Password:</b><input type="password" class="text" size="15" id="pwd" maxlength="255" /></p>
	<p><b class="item L T T_cfmpwd">Confirm Password:</b><input type="password" class="text" size="15" id="pwd2" maxlength="255" onchange="checkPwd();" /></p>
	<p class="nd"><b class="item L">Special Dial:</b><select id="speDail" onchange="" >
	<option id="dail0" value=0 selected >Normal dial mode</option>
	<option id="dail1" value=1>Special dial mode 1</option>
	<option id="dail2" value=2>Special dial mode 2</option>
	<option id="dail3" value=3>Special dial mode 3</option>
	<option id="dail4" value=4>Special dial mode 4</option>
	<option id="dail5" value=5>Special dial mode 5</option>
	<option id="dail6" value=6>Special dial mode 6</option>
	<option id="dail7" value=7>Special dial mode 7</option>
	</select></p>
	<p class="br"></p>
	
	<div id="div_secConn" class="nd">
		<p><b class="item T T_secConn" id="t_secondConn">Secondary Connection:</b>
			<input type="radio" name="secondConnType" id="secConnType_disable" OnClick="showSecondConnect()" checked /><span class="T T_disabled">Disabled</span>
			<input type="radio" name="secondConnType" id="secConnType_dyn" OnClick="showSecondConnect('dynamic')" /><span class="T T_dynip">Dynamic IP</span>
			<input type="radio" name="secondConnType" id="secConnType_sta" OnClick="showSecondConnect('static')" /><span class="T T_staip">Static IP</span>
			<span class="T T_forDual">&nbsp;(For Dual Access)</span>
		</p>
		<div id="secondwarn" class="nd">
		<p class="gray">
			<b class="item T T_warn">Warning:</b><span class="fl"><span class="T" id="t_warn1">The secondary connection shouldn't be in the same subnet with pppoe connection.</span><br /></span>
		</p>
		</div>
		<div id="secondDynIp"class="nd">
			<p><b class="item L T T_ipaddr">IP Address:</b><b style="padding-left:12px" id="secondDynIpAddress">0.0.0.0</b></p>
			<p><b class="item L T T_netmask">Subnet Mask:</b><b style="padding-left:12px" id="secondDynIpMask">0.0.0.0</b></p>
			<p class="br"></p>
			<p><b class="item">&nbsp;</b>
				<input type="button" class="button M T T_renew" id="secondDynIpRenew" value="Renew" disabled onclick="doDhcpRenew()"/>
				<input type="button" class="button M T T_release" id="secondDynIpRelease" value="Release" disabled onclick="doDhcpRelease()"/>
				<span id="secondDynIpConnecting" class="nd">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
			</p>
		</div>
		<div id="secondStaIp" class="nd">
			<p><b class="item L T T_ipaddr">IP Address:</b><input type="text" class="text" id="secondStaIpAddress" value="0.0.0.0" size="15" maxlength="15" /></p>
			<p><b class="item L T T_netmask">Subnet Mask:</b><input type="text" class="text" id="secondStaIpMask" value="0.0.0.0" size="15" maxlength="15" /></p>
		</div>
		<p class="br"></p>
	</div>
	
	<p><b class="item T T_connmode">Connection Mode:</b><input type="radio" name="linkMode" id="connAlwaysOn" checked /> <span class="T T_typeauto">Connect automatically</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="connOnDemand" /> <span class="T T_typedemand">Connect on demand</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="connManual"/> <span class="T T_typemanual">Connect manually</span></p>
	<p><b class="item T T_midle">Max Idle Time:</b><input type="text" class="text" id="idleTime" size="3" maxlength="2" value="15" /> <span class="T T_minutes">minutes</span> <span class="T T_zmean">(0 means remain active at all time)</span></p>
	<p class="br"></p>
	<p><b class="item L T T_authtype">Authentication Type:</b><select id="ppp_authpro" class="L" >
	<option id="auto_auth" value="AUTO_AUTH" selected>AUTO_AUTH</option>
	<option id="pap" value="PAP">PAP</option>
	<option id="chap" value="CHAP">CHAP</option>
	<option id="ms-chap" value="MS-CHAP">MS-CHAP</option>
	</select></p>
	<p class="br"></p>
	<p><b class="item">&nbsp;</b><input type="button" class="button M T T_conn" id="conn" value="Connect"  disabled onclick="doConn()"/><span id="test"></span>
	<input type="button" class="button M T T_disconn" id="disConn" value="Disconnect"  disabled onclick="doDisConn()"/>
	<span id="PPPoEConnecting" class="nd T">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
	</p>
	<p><b class="item">&nbsp;</b><i id="authFail" class="nd">Authentication failed, incorrect username or password.</i></p>
	<p class="br IPv6 nd"></p>
	<div id="ppp_ipx_check" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" class="T" id="ppp_ip4_elem_enable" onclick="ShowDiv(this)" checked /></p>
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" class="T" id="ppp_ip6_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="ppp_ip6_elem_basic">
		<div id="ipv6_cfg_ppp_slaac">
			<p class="IPv6 nd"><b class="item L T T_ip6addrconf">IPv6 Autoconfiguration Type</b>
			<select id="ppp_ip6addr_type" class="L" >
			<option value="dhcp" selected="selected">DHCPv6</option>
			<option value="autoip">SLAAC</option>
			</select></p>
		</div>
	</div>
</div>

<div id="l2tp_pptp_elem_basic" class="nd">
	<p><b class="item L T T_username">Username:</b><input type="text" class="text" size="15" id="ppp_username" maxlength="255" /></p>
	<p><b class="item L T T_passwd">Password:</b><input type="password" class="text" size="15" id="ppp_pwd" maxlength="255" /></p>
	<p><b class="item">&nbsp;</b><input type="button" class="button M T T_conn" id="conn2" value="Connect"  disabled onclick="doConn2()"/><span id="test2"></span>
	<input type="button" class="button M T T_disconn" id="disConn2" value="Disconnect"  disabled onclick="doDisConn2()"/>
	<span id="L2tpPptpConnecting" class="nd T">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
	</p>
	<p class="br"></p>
	<p><b class="item L T" id = "t_addrType">Addressing Type:</b>
	<input type="radio" name="ipType" id="ipType_dyn" onclick="showDyn()" checked /><span class="T T_dynip">Dynamic IP</span>
	<input type="radio" name="ipType" id="ipType_stc" onclick="showStc()" /><span class="T T_staip">Static IP</span></p>
	<p><b class="item L T T_srvIpName">Server IP Address/Name:</b><input type="text" class="text" size="15" id="srvAddrName" maxlength="255" /></p>
	<div id="l2tp_pptp_dyn_ip_elem">
		<p><b class="item L T T_ipaddr" id="isp_ip_addr">IP Address:</b><b style="padding-left:12px" id="isp_ip_dyn">0.0.0.0</b></p>
		<p><b class="item L T T_netmask" id="isp_subnet_mask">Subnet Mask:</b><b style="padding-left:12px" id="isp_net_mask_dyn">0.0.0.0</b></p>
		<p><b class="item L T T_gateway" id="isp_gateway">Gateway:</b><b style="padding-left:12px" id="isp_gw_dyn">0.0.0.0</b></p>
		<p><b class="item L T T_dns" id="isp_dns">DNS:</b><b style="padding-left:12px" id="isp_dns_1_dyn">0.0.0.0</b>,<b style="padding-left:12px" id="isp_dns_2_dyn">0.0.0.0</b></p>
	</div>
	<div id="l2tp_pptp_stc_ip_elem" class="nd">
		<p><b class="item L T T_ipaddr">IP Address:</b><input type="text" class="text" id="isp_ip_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_netmask">Subnet Mask:</b><input type="text" class="text" id="isp_net_mask_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_gateway">Gateway:</b><input type="text" class="text" id="isp_gw_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" id="isp_dns_1_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" id="isp_dns_2_stc" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
	</div>
	<p class="br"></p>
	<p><b class="item L T T_internetipaddr" id="internet_ip_addr">Internet IP Address:</b><b style="padding-left:12px" id="internet_ip">0.0.0.0</b></p>
	<p><b class="item L T T_internetdns" id="internet_dns">Internet DNS:</b><b style="padding-left:12px" id="internet_dns_1">0.0.0.0</b>,<b style="padding-left:12px" id="internet_dns_2">0.0.0.0</b></p>
	<p class="br"></p>
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b>
	<span id="l2tp_mtu_msg"><input type="text" class="text" id="l2tp_mtu" size="5" maxlength="4" value="1460"/> (<span class="T T_mtu1460">1460 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</span>
	<span id="pptp_mtu_msg"><input type="text" class="text" id="pptp_mtu" size="5" maxlength="4" value="1420"/> (<span class="T T_mtu1420">1420 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</span>
	</p>
	<div id="l2tp_pptp_igmp">
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b>
		<span id="l2tp_igmp_msg"><input type="checkbox" id="l2tp_igmp_en" checked="checked" onclick="igmpClick('l2tp');" />&nbsp;</span>
		<span id="pptp_igmp_msg"><input type="checkbox" id="pptp_igmp_en" checked="checked" onclick="igmpClick('pptp');" />&nbsp;</span>
		</p>
		<p id="l2tp_igmpversion" class="nd"><b class="item L T T_igmpversion">IGMP Version</b>
			<input type="radio" name="l2tp_version" id="l2tp_igmp_v2" /><span class="T T_igmpv2">v2</span>&nbsp;&nbsp;
			<input type="radio" name="l2tp_version" id="l2tp_igmp_v3" /><span class="T T_igmpv3">v3</span>&nbsp;
		</p>
		<p id="pptp_igmpversion" class="nd"><b class="item L T T_igmpversion">IGMP Version</b>
			<input type="radio" name="pptp_version" id="pptp_igmp_v2" /><span class="T T_igmpv2">v2</span>&nbsp;&nbsp;
			<input type="radio" name="pptp_version" id="pptp_igmp_v3" /><span class="T T_igmpv3">v3</span>&nbsp;
		</p>
	</div>		
	<p><b class="item T T_connmode">Connection Mode:</b><input type="radio" name="linkMode" id="da_connAlwaysOn" checked /> <span class="T T_typeauto">Connect automatically</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="da_connOnDemand" /> <span class="T T_typedemand">Connect on demand</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="da_connManual"/> <span class="T T_typemanual">Connect manually</span></p>
	<p><b class="item T T_midle">Max Idle Time:</b><input type="text" class="text" id="da_idleTime" size="3" maxlength="2" value="15"/> <span class="T T_minutes">minutes</span> <span class="T T_zmean">(0 means remain active at all time)</span></p>
</div>
<p class="br"></p>

<div id="bpa_elem_basic" class="nd">
	<p><b class="item L T T_username">Username:</b><input type="text" class="text" size="15" id="bpa_username" maxlength="63" /></p>
	<p><b class="item L T T_passwd">Password:</b><input type="password" class="text" size="15" id="bpa_pwd" maxlength="63" /></p>
	<p class="br"></p>
	<p><b class="item L T" id="t_bpa_authServer">Auth Server:</b><input type="text" class="text" size="15" id="bpa_authserver" maxlength="63" /></p>
	<p><b class="item L T" id="t_bpa_authDomain">Auth Domain:</b><input type="text" class="text" size="15" id="bpa_authdomain" maxlength="63" /></p>
	<p class="br"></p>
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b>
	<span id="bpa_mtu_msg"><input type="text" class="text" id="bpa_mtu" size="5" maxlength="4" value="1500"/> (<span class="T T_mtu1500">1500 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</span>
	</p>
	<div id="bpa_igmp">
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="bpa_igmp_en" checked="checked" onclick="igmpClick('bpa');" />&nbsp;</p>
		<p id="bpa_igmpversion" class="nd"><b class="item L T T_igmpversion">IGMP Version</b>
			<input type="radio" name="bpa_version" id="bpa_igmp_v2" /><span class="T T_igmpv2">v2</span>&nbsp;&nbsp;
			<input type="radio" name="bpa_version" id="bpa_igmp_v3" /><span class="T T_igmpv3">v3</span>&nbsp;
		</p>
	</div>
	<p class="br"></p>
	<p><b class="item T T_connmode">Connection Mode:</b><input type="radio" name="bpa_linkMode" id="bpa_connAlwaysOn" checked /> <span class="T T_typeauto">Connect automatically</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="bpa_linkMode" id="bpa_connOnDemand" /> <span class="T T_typedemand">Connect on demand</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="bpa_linkMode" id="bpa_connManual"/> <span class="T T_typemanual">Connect manually</span></p>
	<p><b class="item T T_midle">Max Idle Time:</b><input type="text" class="text" id="bpa_idleTime" size="3" maxlength="2" value="15"/> <span class="T T_minutes">minutes</span> <span class="T T_zmean">(0 means remain active at all time)</span></p>
	<p class="br"></p>
	<p><b class="item">&nbsp;</b><input type="button" class="button M T T_conn" id="bpa_conn" value="Connect"  onclick="doConnBpa()"/><span id="test"></span>
	<input type="button" class="button M T T_disconn" id="bpa_disConn" value="Disconnect"  onclick="doDisConnBpa()"/>
	<span id="BpaConnecting" class="nd T">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
	</p>
</div>

<div class="cl" id="dynipClick" onclick="DynIPClick(this)"><p class="cl"></p></div>
<div id="dyn_ip_elem_adv" class="nd">
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="dyn_mtu" size="5" maxlength="4" value="1500"/> (<span class="T T_mtu1500">1500 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="dyn_ip4_elem_adv">
		<p class="br IPv6 nd"></p>
		<p class="nd"><b class="item L T T_ennat">Enable NAT</b><input type="checkbox" id="dyn_enable_nat" checked="checked" onclick="natClick('dynamic');"/>&nbsp;</p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="dyn_enable_fullnat" />&nbsp;</p>
		<p class="nd"><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="dyn_ip_spi_en" />&nbsp;</p>
		<div id="dyn_ip_igmp">
			<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="dyn_ip_igmp_en" checked="checked" onclick="igmpClick('dyn_ip');" />&nbsp;</p>
			<p id="dyn_ip_igmpversion" class="nd"><b class="item L T T_igmpversion">IGMP Version</b>
				<input type="radio" name="dyn_ip_version" id="dyn_ip_igmp_v2" /><span class="T T_igmpv2">v2</span>&nbsp;&nbsp;
				<input type="radio" name="dyn_ip_version" id="dyn_ip_igmp_v3" /><span class="T T_igmpv3">v3</span>&nbsp;
			</p>
		</div>
		<p><b class="item L T T_unicast">Get IP with Unicast</b><input type="checkbox" id="unicast"/> <span class="T T_noreq">(It is usually not required)</span></p>
		<p class="br"></p>
		<p><b class="item L T T_dnsmanual">Set DNS server manually</b><input type="checkbox" id="dynamic_manual_dns" onclick="doManualDns();"/>&nbsp;</p>
		<div id="dyn_ip_dns_tbl" class="nd">
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dyn_dns1" /></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dyn_dns2" /></p>
		</div>
	</div>
	<div id="dyn_ip6_elem_adv" class="nd">
		<p class="br"></p>
		<div id="dyn_ip_mld" class="nd">
			<p><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="dyn_ip_mld_en" />&nbsp;</p>
		</div>
		<p><b class="item L T T_ip6dnsmanual">Set IPv6 DNS server manually</b><input type="checkbox" id="dynamic_manual_dns6" onclick="doManualDns6();"/></p>
		<div id="dyn_ip_dns6_tbl" class="nd">
		<p><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dyn_dns6_1" /></p>
		<p><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dyn_dns6_2" /></p>
		</div>
	</div>
	<p class="br IPv6 nd"></p>
	<p><b class="item L T T_hostname" id="host_name">Host Name:</b><input type="text" class="text" size="15" id="hostname" maxlength="62"/></p>
</div>

<div class="cl nd" id="ipoeClick" onclick="IPClick(this)"><p class="cl"></p></div>
<div id="ip_elem_adv" class="nd">
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="mtu" size="5" maxlength="4" value="1500"/> (<span class="T T_mtu1500">1500 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="stc_ip4_elem_adv">
		<p class="br IPv6 nd"></p>
		<p class="nd"><b class="item L T T_ennat">Enable NAT</b><input type="checkbox" id="enable_nat" checked="checked" onclick="natClick('static');"/>&nbsp;</p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="enable_fullnat" />&nbsp;</p>
		<p class="nd"><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="enable_spi" />&nbsp;</p>
		<div id="ip_igmp">
			<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="ip_igmp_en" checked="checked" onclick="igmpClick('ip');" />&nbsp;</p>
			<p id="ip_igmpversion" class="nd"><b class="item L T T_igmpversion">IGMP Version</b>
				<input type="radio" name="ip_version" id="ip_igmp_v2" /><span class="T T_igmpv2">v2</span>&nbsp;&nbsp;
				<input type="radio" name="ip_version" id="ip_igmp_v3" /><span class="T T_igmpv3">v3</span>&nbsp;
			</p>
		</div>
	</div>
	<div id="stc_ip6_elem_adv" class="nd">
		<p class="br"></p>
		<div id="ip_mld" class="nd">
			<p><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="ip_mld_en" />&nbsp;</p>
		</div>
	</div>
</div>

<div class="cl nd" id="pppoeClick" onclick="PPPoEClick(this)"><p class="cl"></p></div>
<div id="pppoe_elem_adv" class="nd">
	<p><b class="item L T T_srvname">Service Name:</b><input type="text" class="text" size="15" id="serviceName" maxlength="31" />(<span class="T T_nochg">do not change unless necessary</span>)</p>
	<p><b class="item L T T_acname">Server Name:</b><input type="text" class="text" size="15" id="acName" maxlength="31" />(<span class="T T_nochg">do not change unless necessary</span>)</p>
	<p class="br"></p>
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="pppmtu" size="5" maxlength="4" value="1480" /> (<span class="T T_mtu1480">1480 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="ppp_ip4_elem_adv">
		<p class="br"></p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="ppp_fullnat_en" />&nbsp;</p>
		<p class="nd"><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="ppp_spi_en" />&nbsp;</p>
		<div id="ppp_igmp">
			<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="ppp_igmp_en" checked="checked" onclick="igmpClick('ppp');" />&nbsp;</p>
			<p id="ppp_igmpversion" class="nd"><b class="item L T T_igmpversion">IGMP Version</b>
				<input type="radio" name="ppp_version" id="ppp_igmp_v2" /><span class="T T_igmpv2">v2</span>&nbsp;&nbsp;
				<input type="radio" name="ppp_version" id="ppp_igmp_v3" /><span class="T T_igmpv3">v3</span>&nbsp;
			</p>
		</div>
		<p><b class="item L T T_useispaddr">Use the IP address specified by ISP</b><input type="checkbox" id="externIp_en" onclick="PPPoEShowDiv(2);"/>&nbsp;</p>
		<p id="exIp_tbl" class="nd"><b class="item L T T_ispaddr">ISP Specified IP Address:</b><input type="text" class="text" size="15" value="0.0.0.0" id="externIpAddr" /></p>
	    <p><b class="item L T T_echo">Echo request interval:</b><input type="text" class="text" size="5" id="ppp_echotime" maxlength="3" value="30" /> <span class="T T_echoinfo">(0~120 seconds, 0 means no request)</span></p>
		<p><b class="item L T T_dnsmanual">Set DNS server manually</b><input type="checkbox" id="dns_en" onclick="PPPoEShowDiv(3);"/>&nbsp;</p>
		<div id="dns_tbl" class="nd">
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dns1" /></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dns2" /></p>
		</div>
	</div>
	<div id="ppp_ip6_elem_adv" class="nd">
		<p class="br"></p>
		<div id="ppp_mld" class="nd">
			<p><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="ppp_mld_en" />&nbsp;</p>
		</div>
		<p><b class="item L T T_ip6useispaddr">Use IPv6 address specified by ISP</b><input type="checkbox" id="externIp6_en" onclick="ShowDiv(this);"/></p>
		<div id="exIp6_tbl" class="nd">
			<p><b class="item L T T_ip6ispaddr">ISP specified IPv6 Address:</b><input type="text" class="text" size="15" value="::" id="externIp6Addr" /></p>
			<p><b class="item L T T_ip6ispgw">ISP specified IPv6 Gateway:</b><input type="text" class="text" size="15" value="::" id="externIp6Gateway" /></p>
		</div>
		<p><b class="item L T T_ip6dnsmanual">Set IPv6 DNS server manually</b><input type="checkbox" id="dns6_en" onclick="ShowDiv(this);"/></p>
		<div id="dns6_tbl" class="nd">
			<p><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dns6_1" /></p>
			<p><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dns6_2" /></p>
		</div>
	</div>
</div>

</div>
<p class="bl"></p>
<p class="tail" id="tail">
<input type="button" id="saveBtn" class="button L T T_save" value="Save" onclick="doSave(0);" />
</p>
</div>
<script language="javascript" type="text/javascript">var wan_iplist_sta={};var wan_iplist_dyn={};var wan_pppoelist={};var wan_l2tp_list={};var wan_pptp_list={};var wan_bpa_list={};var wan_iplistarg_sta={};var wan_iplistarg_dyn={};var wan_pppoelistarg={};var wan_l2tp_listarg={};var wan_pptp_listarg={};var wan_bpa_listarg={};var l3Forwarding;var dft_gtw;var ipConnList;var pppConnList;var l2tpConnList;var pptpConnList;var l3ForwardingObj={};var staticStk;var staticEnable;var dynStk;var dynEnable;var PPPoEStk;var PPPoEEnable;var l2tpStk;var l2tpEnable;var pptpStk;var pptpEnable;var bpaStk;var bpaEnable;var pStk;var loadType;var ip4Enable;var ip6Enable;var l3Ip6ForwardingObj={};var lanip;var lanmask;var oldStaIp;var sysMode;if(INCLUDE_RUSSIA_SPEC){$.addClass($.id("detect"),"nd")}init();</script>
